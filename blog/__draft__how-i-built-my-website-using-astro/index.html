<!DOCTYPE html><html lang="en" data-astro-cid-gjtny2mx><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="robots" content="noindex"><title>How I built my website using Astro | Pablo Berganza</title><link rel="alternate" hreflang="es" href="https://pablo.berganza.dev/es/blog/__draft__how-i-built-my-website-using-astro"><link href="/apple-icon-57x57.png" rel="apple-touch-icon" sizes="57x57"><link href="/apple-icon-60x60.png" rel="apple-touch-icon" sizes="60x60"><link href="/apple-icon-72x72.png" rel="apple-touch-icon" sizes="72x72"><link href="/apple-icon-76x76.png" rel="apple-touch-icon" sizes="76x76"><link href="/apple-icon-114x114.png" rel="apple-touch-icon" sizes="114x114"><link href="/apple-icon-120x120.png" rel="apple-touch-icon" sizes="120x120"><link href="/apple-icon-144x144.png" rel="apple-touch-icon" sizes="144x144"><link href="/apple-icon-152x152.png" rel="apple-touch-icon" sizes="152x152"><link href="/apple-icon-180x180.png" rel="apple-touch-icon" sizes="180x180"><link href="/android-icon-192x192.png" rel="icon" sizes="192x192" type="image/png"><link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"><link href="/favicon-96x96.png" rel="icon" sizes="96x96" type="image/png"><link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"><link rel="icon" type="image/png" href="/favicon.ico"><link href="/manifest.json" rel="manifest"><meta content="#E34495" name="msapplication-TileColor"><meta content="ms-icon-144x144.png" name="msapplication-TileImage"><meta content="#E34495" name="theme-color"><script type="module" src="https://unpkg.com/yt-vid@0.0.5/dist/yt-vid/yt-vid.esm.js"></script><script src="/scripts/focus-visible.js" defer></script>
    <script type="application/ld+json">
     {
      "@context": "https://schema.org/",
      "@type": "BlogPosting",
      "headline": "How I built my website using Astro",
      "alternativeHeadline": "Sort of a tutorial on how I built the current iteration of my website",
      "image": "https://pablo.berganza.dev/assets/blog-pics/2022-03-04.png",
      "dateCreated": "2022-03-04",
      "datePublished": "2022-03-04",
      "isFamilyFriendly": "true",
      "publisher": {
        "@type": "Person",
        "name": "Pablo Berganza",
        "url": "https://pablo.berganza.dev/",
        "email": "pablo@berganza.dev",
        "jobTitle": "Software Engineer"
      },
      "author": {
        "@type": "Person",
        "name": "Pablo Berganza",
        "url": "https://pablo.berganza.dev/",
        "email": "pablo@berganza.dev",
        "jobTitle": "Software Engineer"
      }
     }
    </script>
<meta name="author" content="Pablo Berganza"><meta name="description" content="Sort of a tutorial on how I built the current iteration of my website"><meta name="title" content="How I built my website using Astro"><meta itemprop="name" content="How I built my website using Astro"><meta itemprop="description" content="Sort of a tutorial on how I built the current iteration of my website"><meta name="twitter:image" content="https://pablo.berganza.dev/assets/blog-pics/2022-03-04.png"><meta property="og:image" content="https://pablo.berganza.dev/assets/blog-pics/2022-03-04.png"><meta itemprop="image" content="https://pablo.berganza.dev/assets/blog-pics/2022-03-04.png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="How I built my website using Astro"><meta name="twitter:description" content="Sort of a tutorial on how I built the current iteration of my website"><meta name="twitter:site" content="Pablo_ABC"><meta name="twitter:creator" content="Pablo_ABC"><meta property="og:title" content="How I built my website using Astro"><meta property="og:url" content="https://pablo.berganza.dev/blog/__draft__how-i-built-my-website-using-astro"><meta property="og:site_name" content="Pablo Berganza"><meta property="og:description" content="Sort of a tutorial on how I built the current iteration of my website"><meta property="og:locale" content="en"><meta property="fb:admins" content="1441268341"><meta property="fb:app_id" content="2097322913669232"><meta property="og:type" content="article"><meta property="article:author" content="Pablo Berganza"><meta property="article:published_time" content="2022-03-04"><meta name="twitter:data1" value="16 min"><meta name="twitter:data2" value="Pablo Berganza"><meta name="twitter:label1" value="Reading time"><meta name="twitter:label2" value="Author"><meta name="color-scheme" content="light dark"><style>.lang-link[data-astro-cid-c5lam3sp]{position:absolute;top:1rem;right:10vw;z-index:1}
</style>
<link rel="stylesheet" href="/_astro/_slug_.7f9b892b.css" />
<style>a[data-astro-cid-ivbvd6ux].home-page-link{display:inline-block;font-family:Roboto Slab,serif;font-size:2rem;font-weight:700;padding:.5rem;margin-left:10vw;color:var(--color-heading);text-decoration:none}svg[data-astro-cid-skev4gdg]{height:1.125rem}svg[data-astro-cid-ne6vazln]{height:1.125rem}
</style>
<link rel="stylesheet" href="/_astro/index.bd1a3fbf.css" />
<style>.visuallyhidden.svelte-ob38am{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}div.svelte-ob38am{border-top:2px solid var(--color-primary-1);padding-top:20px}div.svelte-ob38am .commento-submit-button{background:var(--color-secondary-2-3)!important}div.svelte-ob38am .commento-submit-button{transition:color .1s}div.svelte-ob38am .commento-submit-button:hover{background:var(--color-secondary-2-1)!important}div.svelte-ob38am .commento-email-button{color:var(--color-secondary-2-3)!important;height:50px!important}div.svelte-ob38am .commento-login-link{color:var(--color-secondary-2-3)!important}div.svelte-ob38am .commento-login-box{background:#FFF7FB!important}div.svelte-ob38am *{font-family:Overpass,Helvetica Neue,Verdana,Helvetica,Arial,sans-serif!important;color:var(--base-font-color)!important}div.svelte-ob38am .commento-button,div.svelte-ob38am .commento-avatar{color:#fff2f8!important}div.svelte-ob38am .commento-sort-policy-buttons-container .commento-sort-policy-buttons .commento-sort-policy-button-selected{color:var(--color-secondary-2-3)!important}div.svelte-ob38am .commento-option-button{background:#A18795!important}div.svelte-ob38am .commento-upvoted,div.svelte-ob38am .commento-downvoted{background:var(--color-secondary-2-3)!important}div.svelte-ob38am .commento-option-remove{background:#e03131!important}
</style><script type="module" src="/_astro/hoisted.f7167de3.js"></script></head><body data-astro-cid-gjtny2mx><main data-astro-cid-gjtny2mx><a class="home-page-link" aria-label="Home page" href="/" data-astro-cid-ivbvd6ux>PB</a><a class="lang-link" href="/es/blog/__draft__how-i-built-my-website-using-astro" lang="es" data-astro-cid-c5lam3sp>¿Hablas español?</a><article data-astro-cid-gjtny2mx><header data-astro-cid-gjtny2mx><h1 class="title" data-astro-cid-gjtny2mx>How I built my website using Astro</h1><p data-astro-cid-gjtny2mx>Sort of a tutorial on how I built the current iteration of my website</p></header><img alt="" class="banner" src="/assets/blog-pics/2022-03-04.png" width="800" height="420" data-astro-cid-gjtny2mx><div class="stats" data-astro-cid-gjtny2mx><div class="ttr" data-astro-cid-gjtny2mx><span data-astro-cid-gjtny2mx><svg role="img" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-astro-cid-skev4gdg><title>Reading time:</title><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" data-astro-cid-skev4gdg></path></svg></span><time datetime="16m" data-astro-cid-gjtny2mx>16minutes</time></div><div class="created" data-astro-cid-gjtny2mx><span data-astro-cid-gjtny2mx><svg role="img" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-astro-cid-ne6vazln><title>Creation date:</title><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" data-astro-cid-ne6vazln></path></svg></span><time class="created-date" datetime="2022-03-04" data-astro-cid-gjtny2mx>March 4, 2022</time></div></div><div class="tags" data-astro-cid-gjtny2mx>Tags:<ul data-astro-cid-gjtny2mx><li data-astro-cid-gjtny2mx><a href="/blog/tags/javascript" data-astro-cid-gjtny2mx>javascript</a></li><li data-astro-cid-gjtny2mx><a href="/blog/tags/astro" data-astro-cid-gjtny2mx>astro</a></li><li data-astro-cid-gjtny2mx><a href="/blog/tags/tutorial" data-astro-cid-gjtny2mx>tutorial</a></li><li data-astro-cid-gjtny2mx><a href="/blog/tags/webdev" data-astro-cid-gjtny2mx>webdev</a></li></ul></div><section class="content" data-astro-cid-gjtny2mx><details data-astro-cid-obewoz47><summary data-astro-cid-obewoz47><svg aria-hidden="true" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg><span data-astro-cid-obewoz47>Table of contents</span></summary><ol id="toc" data-astro-cid-obewoz47><li data-astro-cid-obewoz47><a href="#what-is-astro" data-astro-cid-obewoz47>What is Astro</a></li><li data-astro-cid-obewoz47><a href="#why-astro" data-astro-cid-obewoz47>Why Astro</a></li><li data-astro-cid-obewoz47><a href="#scope-of-this-article" data-astro-cid-obewoz47>Scope of this article</a></li><li data-astro-cid-obewoz47><a href="#structure-of-the-project" data-astro-cid-obewoz47>Structure of the project</a></li><li data-astro-cid-obewoz47><a href="#article-list-page" data-astro-cid-obewoz47>Article list page</a></li><li data-astro-cid-obewoz47><a href="#article-page" data-astro-cid-obewoz47>Article page</a></li><li data-astro-cid-obewoz47><a href="#adding-an-rss-feed" data-astro-cid-obewoz47>Adding an RSS feed</a></li><li data-astro-cid-obewoz47><a href="#table-of-contents-component" data-astro-cid-obewoz47>Table of contents component</a></li><li data-astro-cid-obewoz47><a href="#copy-to-clipboard-button-on-code-snippets" data-astro-cid-obewoz47>Copy to clipboard button on code snippets</a></li><li data-astro-cid-obewoz47><a href="#internationalisation" data-astro-cid-obewoz47>Internationalisation</a></li><li data-astro-cid-obewoz47><a href="#conclusion" data-astro-cid-obewoz47>Conclusion</a></li></ol></details><p>My <a href="https://pablo.berganza.dev">personal website</a> has undergone a few rewrites and redesigns. First written using <a href="https://clojure.org">Clojure</a>, then rewritten using <a href="https://svelte.dev">Svelte</a> and now using <a href="https://astro.build">Astro</a>.</p>
<h2 id="what-is-astro">What is Astro</h2>
<p>Astro is a static site builder that outputs only plain HTML and CSS by default and, if necessary, sprinkles of JavaScript. Astro embraces component driven development by allowing you to split your app in <a href="https://docs.astro.build/en/core-concepts/astro-components/">components</a>. Astro’s components (<code>.astro</code> extension) output plain HTML, but they do let you use JavaScript at build time to generate your final site. The most special characteristic about Astro is that it lets you use components from other frameworks to build your site as well. You can use components from React, Svelte, Solid, Vue, etc. from within an Astro component and they will output plain HTML by default as well!</p>
<h2 id="why-astro">Why Astro</h2>
<p>A website like a personal site or a blog does not really need a full front-end framework to work. Since the purpose of a site like this is mostly to display information, it feels like a waste of resources to make it an SPA. But the developer experience from frameworks might be desirable. With Astro you can <a href="https://docs.astro.build/en/core-concepts/component-hydration/">keep the developer experience from your favourite framework while still only sending HTML to your user</a>! In the case of my personal site I only needed JavaScript for a few specific features: a “copy to clipboard” button on my articles’ code snippets, a comment section on each article, and a little widget that shows the logos of technologies I have experience in. This is why Astro felt like a perfect choice for it!</p>
<p>Besides this, Astro gave me some other niceties:</p>
<ul>
<li>Support to write the content of my site/articles in markdown.</li>
<li>Support to create an RSS feed of my articles.</li>
<li>Easy to transition to since, for the most part, I could reuse some of the components I used on my previous Svelte site.</li>
</ul>
<h2 id="scope-of-this-article">Scope of this article</h2>
<p>I will focus mostly on some details related to features of my website. Styling and layouts will not be mentioned at all since that would depend highly on yourself and your requisites. And only some basic information regarding how to use Astro itself will be included. Check <a href="https://docs.astro.build/en/getting-started/">Astro’s documentation</a> to get familiar with it. In order to understand this article, you should at least be familiar with <a href="https://docs.astro.build/en/core-concepts/astro-components/">Astro’s component syntax</a>. You may see this article more as an overview on how my site works rather than a full in-depth tutorial.</p>
<h2 id="structure-of-the-project">Structure of the project</h2>
<p>There’s not that many pages on my site, so the structure is quite small:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span>src/pages</span></span>
<span class="line"><span>├── 404.astro</span></span>
<span class="line"><span>├── blog</span></span>
<span class="line"><span>│   ├── [slug].astro</span></span>
<span class="line"><span>│   ├── index.astro</span></span>
<span class="line"><span>│   └── tags</span></span>
<span class="line"><span>│       └── [tag].astro</span></span>
<span class="line"><span>├── es</span></span>
<span class="line"><span>│   ├── blog</span></span>
<span class="line"><span>│   │   ├── [slug].astro</span></span>
<span class="line"><span>│   │   ├── index.astro</span></span>
<span class="line"><span>│   │   └── tags</span></span>
<span class="line"><span>│   │       └── [tag].astro</span></span>
<span class="line"><span>│   └── index.astro</span></span>
<span class="line"><span>└── index.astro</span></span></code></pre>
<p>There’s basically four kinds of pages pages: The home page: <code>index.astro</code>, a page with a list of all my articles: <code>blog/index.astro</code>, a page for a specific article: <code>blog/[slug].astro</code> and a page for articles filtered by a tag: <code>blog/tags/[tag].astro</code>.</p>
<p>This whole structure is duplicated inside of the <code>es</code> directory since my site is also in Spanish.</p>
<p>I keep my articles as markdown files on <code>src/posts</code>:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span>src/posts</span></span>
<span class="line"><span>├── en</span></span>
<span class="line"><span>│   ├── announcing-felte-v1.md</span></span>
<span class="line"><span>│   ├── creating-a-chai-like-assertion-library-using-proxies.md</span></span>
<span class="line"><span>│   ├── felte-an-extensible-form-library-react.md</span></span>
<span class="line"><span>│   ├── felte-an-extensible-form-library-solid.md</span></span>
<span class="line"><span>│   ├── felte-an-extensible-form-library-svelte.md</span></span>
<span class="line"><span>│   ├── graphql-is-it-worth-the-switch.md</span></span>
<span class="line"><span>│   ├── how-i-built-my-website-using-astro.md</span></span>
<span class="line"><span>│   ├── start-of-a-new-digital-journey.md</span></span>
<span class="line"><span>│   ├── svelte-my-new-obsession.md</span></span>
<span class="line"><span>│   └── you-dont-need-apollo.md</span></span>
<span class="line"><span>└── es</span></span>
<span class="line"><span>    ├── announcing-felte-v1.md</span></span>
<span class="line"><span>    ├── creating-a-chai-like-assertion-library-using-proxies.md</span></span>
<span class="line"><span>    ├── felte-an-extensible-form-library-react.md</span></span>
<span class="line"><span>    ├── felte-an-extensible-form-library-solid.md</span></span>
<span class="line"><span>    ├── felte-an-extensible-form-library-svelte.md</span></span>
<span class="line"><span>    ├── graphql-is-it-worth-the-switch.md</span></span>
<span class="line"><span>    ├── start-of-a-new-digital-journey.md</span></span>
<span class="line"><span>    ├── svelte-my-new-obsession.md</span></span>
<span class="line"><span>    └── you-dont-need-apollo.md</span></span></code></pre>
<p>Two layout components in <code>src/layouts</code>:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span>src/layouts</span></span>
<span class="line"><span>├── Base.astro</span></span>
<span class="line"><span>├── PostLayout.astro</span></span>
<span class="line"><span>└── copy-button.js</span></span></code></pre>
<blockquote>
<p><code>copy-button.js</code> is the script I use to add a <code>Copy to clipboard</code> button on code snippets.</p>
</blockquote>
<p>I also keep some reusable components on the <code>src/components</code> folder.</p>
<h2 id="article-list-page">Article list page</h2>
<p>Since my site is in both English and Spanish, most of the contents of the files within the <code>pages</code> are reusable components. This means that the markup for files within <code>src/pages</code> is really small. The file that generates the list of articles (<code>src/pages/blog/index.astro</code>) contains the following markup:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">&#x3C;</span><span style="color:#FF79C6">Base</span><span style="color:#50FA7B;font-style:italic"> title</span><span style="color:#FF79C6">=</span><span style="color:#E9F284">"</span><span style="color:#F1FA8C">Blog</span><span style="color:#E9F284">"</span><span style="color:#50FA7B;font-style:italic"> lang</span><span style="color:#FF79C6">=</span><span style="color:#E9F284">"</span><span style="color:#F1FA8C">en</span><span style="color:#E9F284">"</span><span style="color:#50FA7B;font-style:italic"> section</span><span style="color:#FF79C6">=</span><span style="color:#E9F284">"</span><span style="color:#F1FA8C">blog</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#F8F8F2">  &#x3C;</span><span style="color:#FF5555;font-style:italic;text-decoration:underline">Blogs</span><span style="color:#50FA7B;font-style:italic"> lang</span><span style="color:#FF79C6">=</span><span style="color:#E9F284">"</span><span style="color:#F1FA8C">en</span><span style="color:#E9F284">"</span><span style="color:#50FA7B;font-style:italic"> posts</span><span style="color:#FF79C6">=</span><span style="color:#F1FA8C">{posts}</span><span style="color:#50FA7B;font-style:italic"> showRss</span><span style="color:#F8F8F2"> /></span></span>
<span class="line"><span style="color:#F8F8F2">&#x3C;/</span><span style="color:#FF5555;font-style:italic;text-decoration:underline">Base</span><span style="color:#F8F8F2">></span></span></code></pre>
<p>It’s just two components. A <code>Base</code> layout component that contains the <code>&#x3C;html></code> tag, SEO related tags, styling, etc. And a <code>Blogs</code> component that renders the lists of articles.  Each of them receiving certain props:</p>
<p>The <code>Base</code> component receives the following:</p>
<ul>
<li><code>title</code> is used to create the pages <code>&#x3C;title></code>. Within the <code>Base</code> component this will get turned into <code>Blog | Pablo Berganza</code>.</li>
<li><code>lang</code> is used to communicate what language the page is currently on. Since this is called within the English part of my site, it’s hardcoded as <code>en</code>. This is used to create the <code>&#x3C;html lang></code> attribute, the link to the Spanish version, and to change communicate which language to use for certain attributes such as the page’s description.</li>
<li><code>section</code> is used to communicate on which section of the page we are. Used to build links among other things.</li>
</ul>
<p>The <code>Blogs</code> component receives the following:</p>
<ul>
<li><code>lang</code> serves the same purpose as for <code>Base</code>.</li>
<li><code>posts</code> is an array containing the articles to show in the page.</li>
<li><code>showRss</code> is a boolean to tell if the current page should show a link to my RSS feed. Since I share this component also for the <code>tags</code> page, and I don’t want to show said link in that page since I felt it’d give the false impression that you can subscribe to a specific tag.</li>
</ul>
<p>The <code>posts</code> array is obtained by using <code>Astro.fetchContent</code> to get the markdown files for my articles. Within the <code>blog/index.astro</code> file, this looks more or less like this (in the file’s front matter):</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#6272A4">// Inside of the component's front matter</span></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> posts </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> Astro</span></span>
<span class="line"><span style="color:#6272A4">      // We fetch the markdown files for</span></span>
<span class="line"><span style="color:#6272A4">      // my articles in English</span></span>
<span class="line"><span style="color:#F8F8F2">      .</span><span style="color:#50FA7B">fetchContent</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">../../posts/en/*.md</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#6272A4">      // If we are in production mode, we filter</span></span>
<span class="line"><span style="color:#6272A4">      // posts that are not yet published</span></span>
<span class="line"><span style="color:#F8F8F2">      .</span><span style="color:#50FA7B">filter</span><span style="color:#F8F8F2">((</span><span style="color:#FFB86C;font-style:italic">post</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">        if</span><span style="color:#F8F8F2"> (</span><span style="color:#FF79C6">import</span><span style="color:#F8F8F2">.meta.env.</span><span style="color:#BD93F9">PROD</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#FF79C6">          return</span><span style="color:#F8F8F2"> post.published;</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#FF79C6">        return</span><span style="color:#BD93F9"> true</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">      })</span></span>
<span class="line"><span style="color:#6272A4">      // We add the URL for each article based on the</span></span>
<span class="line"><span style="color:#6272A4">      // file's path.</span></span>
<span class="line"><span style="color:#F8F8F2">      .</span><span style="color:#50FA7B">map</span><span style="color:#F8F8F2">((</span><span style="color:#FFB86C;font-style:italic">post</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">        let</span><span style="color:#F8F8F2"> slug </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> post</span></span>
<span class="line"><span style="color:#F8F8F2">          .file</span></span>
<span class="line"><span style="color:#F8F8F2">          .pathname</span></span>
<span class="line"><span style="color:#F8F8F2">          .</span><span style="color:#50FA7B">replace</span><span style="color:#F8F8F2">(</span><span style="color:#FF5555">/</span><span style="color:#F1FA8C">\/src\/posts\/en\/</span><span style="color:#FF5555">/</span><span style="color:#F8F8F2">, </span><span style="color:#E9F284">''</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">          .</span><span style="color:#50FA7B">replace</span><span style="color:#F8F8F2">(</span><span style="color:#FF5555">/</span><span style="color:#F1FA8C">\.md</span><span style="color:#FF79C6">$</span><span style="color:#FF5555">/</span><span style="color:#F8F8F2">, </span><span style="color:#E9F284">''</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#6272A4">        // For local development, we modify the URL for</span></span>
<span class="line"><span style="color:#6272A4">        // drafts.</span></span>
<span class="line"><span style="color:#FF79C6">        if</span><span style="color:#F8F8F2"> (</span><span style="color:#FF79C6">!</span><span style="color:#F8F8F2">post.published) slug </span><span style="color:#FF79C6">=</span><span style="color:#F1FA8C"> `__draft__</span><span style="color:#FF79C6">${</span><span style="color:#F8F8F2">slug</span><span style="color:#FF79C6">}</span><span style="color:#F1FA8C">`</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#FF79C6">        const</span><span style="color:#F8F8F2"> url </span><span style="color:#FF79C6">=</span><span style="color:#F1FA8C"> `/blog/</span><span style="color:#FF79C6">${</span><span style="color:#F8F8F2">slug</span><span style="color:#FF79C6">}</span><span style="color:#F1FA8C">`</span></span>
<span class="line"><span style="color:#FF79C6">        return</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">          ...</span><span style="color:#F8F8F2">post,</span></span>
<span class="line"><span style="color:#F8F8F2">          url,</span></span>
<span class="line"><span style="color:#F8F8F2">        };</span></span>
<span class="line"><span style="color:#F8F8F2">      })</span></span>
<span class="line"><span style="color:#6272A4">      // We sort the articles based on publication date</span></span>
<span class="line"><span style="color:#F8F8F2">      .</span><span style="color:#50FA7B">sort</span><span style="color:#F8F8F2">((</span><span style="color:#FFB86C;font-style:italic">a</span><span style="color:#F8F8F2">, </span><span style="color:#FFB86C;font-style:italic">b</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">        return</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#FF79C6;font-weight:bold">          new</span><span style="color:#50FA7B"> Date</span><span style="color:#F8F8F2">(b.created).</span><span style="color:#50FA7B">getTime</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">-</span></span>
<span class="line"><span style="color:#FF79C6;font-weight:bold">            new</span><span style="color:#50FA7B"> Date</span><span style="color:#F8F8F2">(a.created).</span><span style="color:#50FA7B">getTime</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">        )</span></span>
<span class="line"><span style="color:#F8F8F2">      });</span></span></code></pre>
<p>We are chaining a few methods here. First we use <code>fetchContent</code> to get all the markdown articles that are in English (in my project I keep them on <code>src/posts/en</code>). <a href="https://docs.astro.build/en/reference/api-reference/#astrofetchcontent">Astro.fetchContent</a> is a utility provided by Astro that, currently, only serves to import markdown files.</p>
<p>Next we use <code>filter</code> to filter articles that have not yet been published in production mode. I only filter these articles in this page since I still want the blog to be available via direct URL as a draft.</p>
<p>Next we use <code>map</code> to add a <code>url</code> property to each post derived from the file’s path. This is used to add the link to each article’s page on each item. Note that I modify the URL when the article is a draft. This is only useful for local dev since the article won’t appear on the article list when deployed.</p>
<p>Finally we sort the articles based on the property <code>created</code>, which contains the publication date I set on the file’s front matter.</p>
<h2 id="article-page">Article page</h2>
<p>The pages for each article are created from the file <code>pages/blog/[slug].astro</code>. The <code>[slug]</code> section indicates that this file will handle a <a href="https://docs.astro.build/en/core-concepts/routing/#dynamic-routes">dynamic route</a>, which may refer to multiple pages. The markup for this component is as follows:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">&#x3C;</span><span style="color:#FF5555;font-style:italic;text-decoration:underline">Post</span><span style="color:#50FA7B;font-style:italic"> post</span><span style="color:#FF79C6">=</span><span style="color:#F1FA8C">{post}</span><span style="color:#F8F8F2"> /></span></span></code></pre>
<p><code>Post</code> is similar to our <code>Base</code> component previously mentioned. It also sets an <code>&#x3C;html></code> tag, sets meta tags, styling, etc. The layout was different enough to warrant a different layout in this case.</p>
<p>Unlike the <code>Base</code> component, this one only receives a <code>post</code> prop which contains the post’s parsed content from <code>Astro.fetchContent</code>. The language of the page and its content are included in that same prop.</p>
<p>The value for <code>post</code> comes from <code>getStaticPaths</code>, which is a function exported from the component itself that is used by Astro to handle dynamic routes. For my site this looks more or less like this:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#6272A4">// Inside of the component's front matter</span></span>
<span class="line"><span style="color:#FF79C6">export</span><span style="color:#FF79C6"> async</span><span style="color:#FF79C6"> function</span><span style="color:#50FA7B"> getStaticPaths</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#FF79C6">  const</span><span style="color:#F8F8F2"> posts </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> Astro</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#50FA7B">fetchContent</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">../../posts/en/*.md</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#50FA7B">map</span><span style="color:#F8F8F2">((</span><span style="color:#FFB86C;font-style:italic">post</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#6272A4">          // We generate slugs for each article based</span></span>
<span class="line"><span style="color:#6272A4">          // on the file's path</span></span>
<span class="line"><span style="color:#FF79C6">          let</span><span style="color:#F8F8F2"> slug </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> post</span></span>
<span class="line"><span style="color:#F8F8F2">            .file</span></span>
<span class="line"><span style="color:#F8F8F2">            .pathname</span></span>
<span class="line"><span style="color:#F8F8F2">            .</span><span style="color:#50FA7B">replace</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">/src/posts/en/</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">, </span><span style="color:#E9F284">''</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">            .</span><span style="color:#50FA7B">replace</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">.md</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">, </span><span style="color:#E9F284">''</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#6272A4">          // We modify the article's slug for drafts</span></span>
<span class="line"><span style="color:#FF79C6">          if</span><span style="color:#F8F8F2"> (</span><span style="color:#FF79C6">!</span><span style="color:#F8F8F2">post.published) slug </span><span style="color:#FF79C6">=</span><span style="color:#F1FA8C"> `__draft__</span><span style="color:#FF79C6">${</span><span style="color:#F8F8F2">slug</span><span style="color:#FF79C6">}</span><span style="color:#F1FA8C">`</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#FF79C6">          return</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">            ...</span><span style="color:#F8F8F2">post,</span></span>
<span class="line"><span style="color:#F8F8F2">            lang</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">en</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">            slug,</span></span>
<span class="line"><span style="color:#F8F8F2">          };</span></span>
<span class="line"><span style="color:#F8F8F2">        });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">  // We get an array of all the possible slugs</span></span>
<span class="line"><span style="color:#FF79C6">  const</span><span style="color:#F8F8F2"> slugs </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> posts.</span><span style="color:#50FA7B">map</span><span style="color:#F8F8F2">((</span><span style="color:#FFB86C;font-style:italic">post</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> post.slug);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">  // This is the return value expected from `getStaticPaths`</span></span>
<span class="line"><span style="color:#6272A4">  // It's an object representing each page that's going</span></span>
<span class="line"><span style="color:#6272A4">  // to be generated.</span></span>
<span class="line"><span style="color:#FF79C6">  return</span><span style="color:#F8F8F2"> slugs.</span><span style="color:#50FA7B">map</span><span style="color:#F8F8F2">(</span><span style="color:#FFB86C;font-style:italic">slug</span><span style="color:#FF79C6"> =></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    return</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">      params</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> { slug },</span></span>
<span class="line"><span style="color:#F8F8F2">      props</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#6272A4">        // Each page will receive a single article as a prop.</span></span>
<span class="line"><span style="color:#F8F8F2">        post</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> posts.</span><span style="color:#50FA7B">find</span><span style="color:#F8F8F2">(</span><span style="color:#FFB86C;font-style:italic">post</span><span style="color:#FF79C6"> =></span><span style="color:#F8F8F2"> post.slug </span><span style="color:#FF79C6">===</span><span style="color:#F8F8F2"> slug)</span></span>
<span class="line"><span style="color:#F8F8F2">      },</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  });</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">// We get the `post` prop from `Astro.props`</span></span>
<span class="line"><span style="color:#6272A4">// This is the value that will be passed to the `Post`</span></span>
<span class="line"><span style="color:#6272A4">// component.</span></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> { post } </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> Astro.props;</span></span></code></pre>
<p>The front matter will export a <code>getStaticPaths</code> function. Inside of this function I’m fetching the markdown file’s from my articles. I’m then adding a <code>slug</code> property to each file which is derived from the file’s path. This slug will refer to the path parameter in <code>[slug].astro</code>. Note that I’m not filtering the articles on this page since I want to be able to share them as drafts.</p>
<blockquote>
<p>Out of the scope of this article: If the file is a draft I add a <code>&#x3C;meta name=“robots” content=“noindex”></code> tag to the page’s head so it does not get indexed by search engines. The slug is modified to prepend <code>__draft__</code> to prevent search engines from caching the <code>noindex</code> when the article is actually published.</p>
</blockquote>
<p>Astro expects that the <code>getStaticPaths</code> function returns an array of objects. Each object represents each page that should be generated. In my case each object contains the following properties:</p>
<ul>
<li><code>params</code> is an object that contains the path parameters for each page. For example: if we had a slug <code>example-article</code> in this file <code>src/pages/blog/[slug].astro</code>, and we assign that to the <code>slug</code> property of <code>params</code>, this would tell Astro to generate a file for this page in <code>/blog/example-article/index.html</code>.</li>
<li><code>props</code> is an object that contains the props each component will receive from <code>Astro.props</code>. In this case it only contains a single prop <code>post</code> which will have a single article with a matching slug from the path parameter.</li>
</ul>
<h2 id="adding-an-rss-feed">Adding an RSS feed</h2>
<p>Astro has a really handy utility to <a href="https://docs.astro.build/en/guides/rss/">create RSS feeds from your dynamic routes</a>. This is only available on dynamic routes currently, which is why I used a <code>[slug].astro</code> file to create my articles instead of using <a href="https://docs.astro.build/en/guides/markdown-content/#markdown-pages">markdown pages</a>. In order to add an RSS feed to the site, we’d need to modify the <code>getStaticPaths</code> function exported from <code>[slug].astro</code>. This looks like this in my site:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#6272A4">// Inside of the component's front matter</span></span>
<span class="line"><span style="color:#6272A4">// `getStaticPaths` receives an object with a function `rss`</span></span>
<span class="line"><span style="color:#FF79C6">export</span><span style="color:#FF79C6"> async</span><span style="color:#FF79C6"> function</span><span style="color:#50FA7B"> getStaticPaths</span><span style="color:#F8F8F2">({ </span><span style="color:#FFB86C;font-style:italic">rss</span><span style="color:#F8F8F2"> }) {</span></span>
<span class="line"><span style="color:#FF79C6">  const</span><span style="color:#F8F8F2"> posts </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> Astro</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#50FA7B">fetchContent</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">../../posts/en/*.md</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">        .</span><span style="color:#50FA7B">map</span><span style="color:#F8F8F2">((</span><span style="color:#FFB86C;font-style:italic">post</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">          const</span><span style="color:#F8F8F2"> slug </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> post</span></span>
<span class="line"><span style="color:#F8F8F2">                .file</span></span>
<span class="line"><span style="color:#F8F8F2">                .pathname</span></span>
<span class="line"><span style="color:#F8F8F2">                .</span><span style="color:#50FA7B">replace</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">/src/posts/en/</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">, </span><span style="color:#E9F284">''</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">                .</span><span style="color:#50FA7B">replace</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">.md</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">, </span><span style="color:#E9F284">''</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#FF79C6">          return</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">            ...</span><span style="color:#F8F8F2">post,</span></span>
<span class="line"><span style="color:#F8F8F2">            lang</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">en</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">            slug,</span></span>
<span class="line"><span style="color:#F8F8F2">          };</span></span>
<span class="line"><span style="color:#F8F8F2">        });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">  const</span><span style="color:#F8F8F2"> slugs </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> posts.</span><span style="color:#50FA7B">map</span><span style="color:#F8F8F2">((</span><span style="color:#FFB86C;font-style:italic">post</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> post.slug);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">  // We call the `rss` function with the information of our</span></span>
<span class="line"><span style="color:#6272A4">  // feed.</span></span>
<span class="line"><span style="color:#50FA7B">  rss</span><span style="color:#F8F8F2">({</span></span>
<span class="line"><span style="color:#F8F8F2">    title</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">Blog | Pablo Berganza</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    stylesheet</span><span style="color:#FF79C6">:</span><span style="color:#BD93F9"> true</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    description</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">Articles about web dev among other things</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">    customData</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">&#x3C;language>en-us&#x3C;/language></span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#6272A4">    // We filter, sort by published date and map the</span></span>
<span class="line"><span style="color:#6272A4">    // articles to be in the shape Astro expects.</span></span>
<span class="line"><span style="color:#F8F8F2">    items</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> posts</span></span>
<span class="line"><span style="color:#F8F8F2">      .</span><span style="color:#50FA7B">filter</span><span style="color:#F8F8F2">((</span><span style="color:#FFB86C;font-style:italic">post</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">        if</span><span style="color:#F8F8F2"> (</span><span style="color:#FF79C6">import</span><span style="color:#F8F8F2">.meta.env.</span><span style="color:#BD93F9">PROD</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#FF79C6">          return</span><span style="color:#F8F8F2"> post.published;</span></span>
<span class="line"><span style="color:#F8F8F2">        }</span></span>
<span class="line"><span style="color:#FF79C6">        return</span><span style="color:#BD93F9"> true</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">      })</span></span>
<span class="line"><span style="color:#F8F8F2">      .</span><span style="color:#50FA7B">sort</span><span style="color:#F8F8F2">((</span><span style="color:#FFB86C;font-style:italic">a</span><span style="color:#F8F8F2">, </span><span style="color:#FFB86C;font-style:italic">b</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">        return</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#FF79C6;font-weight:bold">          new</span><span style="color:#50FA7B"> Date</span><span style="color:#F8F8F2">(b.created).</span><span style="color:#50FA7B">getTime</span><span style="color:#F8F8F2">() </span><span style="color:#FF79C6">-</span></span>
<span class="line"><span style="color:#FF79C6;font-weight:bold">            new</span><span style="color:#50FA7B"> Date</span><span style="color:#F8F8F2">(a.created).</span><span style="color:#50FA7B">getTime</span><span style="color:#F8F8F2">()</span></span>
<span class="line"><span style="color:#F8F8F2">        )</span></span>
<span class="line"><span style="color:#F8F8F2">      })</span></span>
<span class="line"><span style="color:#F8F8F2">      .</span><span style="color:#50FA7B">map</span><span style="color:#F8F8F2">(</span><span style="color:#FFB86C;font-style:italic">item</span><span style="color:#FF79C6"> =></span><span style="color:#F8F8F2"> ({</span></span>
<span class="line"><span style="color:#F8F8F2">        title</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> item.title,</span></span>
<span class="line"><span style="color:#F8F8F2">        description</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> item.description,</span></span>
<span class="line"><span style="color:#F8F8F2">        link</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> item</span></span>
<span class="line"><span style="color:#F8F8F2">          .file</span></span>
<span class="line"><span style="color:#F8F8F2">          .pathname</span></span>
<span class="line"><span style="color:#F8F8F2">          .</span><span style="color:#50FA7B">replace</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">/src/posts/en</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">, </span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">/blog</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">          .</span><span style="color:#50FA7B">replace</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">.md</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">, </span><span style="color:#E9F284">''</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">        pubDate</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> item.created,</span></span>
<span class="line"><span style="color:#F8F8F2">      })),</span></span>
<span class="line"><span style="color:#F8F8F2">    dest</span><span style="color:#FF79C6">:</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">/blog/rss.xml</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">  return</span><span style="color:#F8F8F2"> slugs.</span><span style="color:#50FA7B">map</span><span style="color:#F8F8F2">(</span><span style="color:#FFB86C;font-style:italic">slug</span><span style="color:#FF79C6"> =></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    return</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">      params</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> { slug },</span></span>
<span class="line"><span style="color:#F8F8F2">      props</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">        post</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> posts.</span><span style="color:#50FA7B">find</span><span style="color:#F8F8F2">(</span><span style="color:#FFB86C;font-style:italic">post</span><span style="color:#FF79C6"> =></span><span style="color:#F8F8F2"> post.slug </span><span style="color:#FF79C6">===</span><span style="color:#F8F8F2"> slug)</span></span>
<span class="line"><span style="color:#F8F8F2">      },</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  });</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> { post } </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> Astro.props;</span></span></code></pre>
<p>The only difference from this and the previous version of <code>getStaticPaths</code> is that we’re accepting an object as a parameter that contains an <code>rss</code> function, and then we’re calling it with some options. The rest is the same.</p>
<h2 id="table-of-contents-component">Table of contents component</h2>
<p>The table of contents, a recent addition to my site, is made without any JavaScript.  I’m using a <code>&#x3C;details></code> element so the table of contents is hidden unless the user wants to see it. The markup for it looks like this:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">&#x3C;</span><span style="color:#FF79C6">details</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#F8F8F2">  &#x3C;</span><span style="color:#FF79C6">summary</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#F8F8F2">    &#x3C;!-- An SVG icon obtained from heroicons --></span></span>
<span class="line"><span style="color:#F8F8F2">    &#x3C;</span><span style="color:#8BE9FD;font-style:italic">ChevronRight</span><span style="color:#F8F8F2"> /></span></span>
<span class="line"><span style="color:#FF79C6">    {</span><span style="color:#F8F8F2">lang </span><span style="color:#FF79C6">===</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">en</span><span style="color:#E9F284">'</span><span style="color:#FF79C6"> ?</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">Table of contents</span><span style="color:#E9F284">'</span><span style="color:#FF79C6"> :</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">Índice</span><span style="color:#E9F284">'</span><span style="color:#FF79C6">}</span></span>
<span class="line"><span style="color:#F8F8F2">  &#x3C;/</span><span style="color:#FF79C6">summary</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#F8F8F2">  &#x3C;</span><span style="color:#FF79C6">ol</span><span style="color:#50FA7B;font-style:italic"> id</span><span style="color:#FF79C6">=</span><span style="color:#E9F284">"</span><span style="color:#F1FA8C">toc</span><span style="color:#E9F284">"</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#FF79C6">    {</span><span style="color:#F8F8F2">headers.</span><span style="color:#50FA7B">map</span><span style="color:#F8F8F2">((</span><span style="color:#FFB86C;font-style:italic">header</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">      return</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F8F8F2">        &#x3C;</span><span style="color:#FF79C6">li</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#F8F8F2">          &#x3C;</span><span style="color:#FF79C6">a</span><span style="color:#50FA7B;font-style:italic"> href</span><span style="color:#FF79C6">={</span><span style="color:#F1FA8C">`#</span><span style="color:#FF79C6">${</span><span style="color:#F8F8F2">header.slug</span><span style="color:#FF79C6">}</span><span style="color:#F1FA8C">`</span><span style="color:#FF79C6">}</span><span style="color:#F8F8F2">></span><span style="color:#FF79C6">{</span><span style="color:#F8F8F2">header.text</span><span style="color:#FF79C6">}</span><span style="color:#F8F8F2">&#x3C;/</span><span style="color:#FF79C6">a</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#FF79C6">          {</span><span style="color:#F8F8F2">header.subheaders.length </span><span style="color:#FF79C6">!==</span><span style="color:#BD93F9"> 0</span><span style="color:#FF79C6"> &#x26;&#x26;</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F8F8F2">            &#x3C;</span><span style="color:#FF79C6">ul</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#FF79C6">              {</span><span style="color:#F8F8F2">header.subheaders.</span><span style="color:#50FA7B">map</span><span style="color:#F8F8F2">((</span><span style="color:#FFB86C;font-style:italic">sh</span><span style="color:#F8F8F2">) </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F8F8F2">                &#x3C;</span><span style="color:#FF79C6">li</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#F8F8F2">                  &#x3C;</span><span style="color:#FF79C6">a</span><span style="color:#50FA7B;font-style:italic"> href</span><span style="color:#FF79C6">={</span><span style="color:#F1FA8C">`#</span><span style="color:#FF79C6">${</span><span style="color:#F8F8F2">sh.slug</span><span style="color:#FF79C6">}</span><span style="color:#F1FA8C">`</span><span style="color:#FF79C6">}</span><span style="color:#F8F8F2">></span><span style="color:#FF79C6">{</span><span style="color:#F8F8F2">sh.text</span><span style="color:#FF79C6">}</span><span style="color:#F8F8F2">&#x3C;/</span><span style="color:#FF79C6">a</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#F8F8F2">                &#x3C;/</span><span style="color:#FF79C6">li</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#F8F8F2">              ))</span><span style="color:#FF79C6">}</span></span>
<span class="line"><span style="color:#F8F8F2">            &#x3C;/</span><span style="color:#FF79C6">ul</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#F8F8F2">          )</span><span style="color:#FF79C6">}</span></span>
<span class="line"><span style="color:#F8F8F2">        &#x3C;/</span><span style="color:#FF79C6">li</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#F8F8F2">      );</span></span>
<span class="line"><span style="color:#F8F8F2">    })</span><span style="color:#FF79C6">}</span></span>
<span class="line"><span style="color:#F8F8F2">  &#x3C;/</span><span style="color:#FF79C6">ol</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#F8F8F2">&#x3C;/</span><span style="color:#FF79C6">details</span><span style="color:#F8F8F2">></span></span></code></pre>
<p>The <code>headers</code> come from Astro’s <code>fetchContent</code> result. I manually nested sub levels (only <code>&#x3C;h2></code> and <code>&#x3C;h3></code> elements get added to the table of contents).</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#6272A4">// Inside of the component's front matter</span></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> { headers</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> astroHeaders, lang </span><span style="color:#FF79C6">=</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">en</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2"> } </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> Astro.props;</span></span>
<span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> headers </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> [];</span></span>
<span class="line"><span style="color:#FF79C6">for</span><span style="color:#F8F8F2"> (</span><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> header </span><span style="color:#FF79C6">of</span><span style="color:#F8F8F2"> astroHeaders) {</span></span>
<span class="line"><span style="color:#FF79C6">  if</span><span style="color:#F8F8F2"> (header.depth </span><span style="color:#FF79C6">===</span><span style="color:#BD93F9"> 2</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#F8F8F2">    headers.</span><span style="color:#50FA7B">push</span><span style="color:#F8F8F2">({</span></span>
<span class="line"><span style="color:#FF79C6">      ...</span><span style="color:#F8F8F2">header,</span></span>
<span class="line"><span style="color:#F8F8F2">      subheaders</span><span style="color:#FF79C6">:</span><span style="color:#F8F8F2"> [],</span></span>
<span class="line"><span style="color:#F8F8F2">    });</span></span>
<span class="line"><span style="color:#FF79C6">    continue</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#FF79C6">  if</span><span style="color:#F8F8F2"> (header.depth </span><span style="color:#FF79C6">===</span><span style="color:#BD93F9"> 3</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#FF79C6">    const</span><span style="color:#F8F8F2"> lastHeader </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> headers[headers.length </span><span style="color:#FF79C6">-</span><span style="color:#BD93F9"> 1</span><span style="color:#F8F8F2">];</span></span>
<span class="line"><span style="color:#F8F8F2">    lastHeader.subheaders.</span><span style="color:#50FA7B">push</span><span style="color:#F8F8F2">(header);</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<h2 id="copy-to-clipboard-button-on-code-snippets">Copy to clipboard button on code snippets</h2>
<p>As mentioned earlier, I’m adding a <code>copy to clipboard</code> button using JavaScript to my code snippets. This is a vanilla JS script that looks for each <code>&#x3C;pre></code> block, puts it in a container and adds a <code>&#x3C;button></code> to it with a handler that copies the <code>&#x3C;pre></code> element’s text content to the clipboard. While there are some third party packages/plugins to accomplish this, I could not make them work as I wanted. You may have better luck than me, though!</p>
<p>This script gets added using a <code>&#x3C;script></code> tag in the component right after the article’s content. This prevent’s the layout from jumping (since the script modifies the layout itself). A simplified version of it is as follows:</p>
<pre class="astro-code dracula" style="background-color:#282A36;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> codeBlocks </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> document.</span><span style="color:#50FA7B">querySelectorAll</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">pre</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#6272A4">// SVG markup omitted for brevity.</span></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> copySvg </span><span style="color:#FF79C6">=</span><span style="color:#F1FA8C"> `...`</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> copiedSvg </span><span style="color:#FF79C6">=</span><span style="color:#F1FA8C"> `...`</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> failedSvg </span><span style="color:#FF79C6">=</span><span style="color:#F1FA8C"> `...`</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#6272A4">// Adding some styles for the button</span></span>
<span class="line"><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> style </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> document.</span><span style="color:#50FA7B">createElement</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">style</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">style.type </span><span style="color:#FF79C6">=</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">text/css</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">style.textContent </span><span style="color:#FF79C6">=</span><span style="color:#F1FA8C"> `...`</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">document.head.</span><span style="color:#50FA7B">appendChiled</span><span style="color:#F8F8F2">(style);</span></span>
<span class="line"><span style="color:#FF79C6">let</span><span style="color:#F8F8F2"> id </span><span style="color:#FF79C6">=</span><span style="color:#BD93F9"> 0</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#FF79C6">for</span><span style="color:#F8F8F2"> (</span><span style="color:#FF79C6">const</span><span style="color:#F8F8F2"> block </span><span style="color:#FF79C6">of</span><span style="color:#F8F8F2"> codeBlocks) {</span></span>
<span class="line"><span style="color:#FF79C6">  const</span><span style="color:#F8F8F2"> textContent </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> block.textContent;</span></span>
<span class="line"><span style="color:#FF79C6">  const</span><span style="color:#F8F8F2"> parent </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> block.parentNode;</span></span>
<span class="line"><span style="color:#FF79C6">  const</span><span style="color:#F8F8F2"> container </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> document.</span><span style="color:#50FA7B">createElement</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">div</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#6272A4">  // Moving the code block to the container div</span></span>
<span class="line"><span style="color:#F8F8F2">  parent.</span><span style="color:#50FA7B">insertBefore</span><span style="color:#F8F8F2">(container, block);</span></span>
<span class="line"><span style="color:#6272A4">  // Making the code block focusable so it can be scrolled</span></span>
<span class="line"><span style="color:#6272A4">  // by keyboard users</span></span>
<span class="line"><span style="color:#F8F8F2">  block.tabIndex </span><span style="color:#FF79C6">=</span><span style="color:#BD93F9"> 0</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">  // Creating the button and its children</span></span>
<span class="line"><span style="color:#FF79C6">  const</span><span style="color:#F8F8F2"> copyButton </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> document.</span><span style="color:#50FA7B">createElement</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">button</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">  container.</span><span style="color:#50FA7B">appendChild</span><span style="color:#F8F8F2">(copyButton);</span></span>
<span class="line"><span style="color:#FF79C6">  const</span><span style="color:#F8F8F2"> svgContainer </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> document.</span><span style="color:#50FA7B">createElement</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">div</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">  copyButton.</span><span style="color:#50FA7B">appendChild</span><span style="color:#F8F8F2">(svgContainer);</span></span>
<span class="line"><span style="color:#FF79C6">  const</span><span style="color:#F8F8F2"> tooltip </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> document.</span><span style="color:#50FA7B">createElement</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">div</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">  copyButton.</span><span style="color:#50FA7B">appendChild</span><span style="color:#F8F8F2">(tooltip);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">  tooltip.id </span><span style="color:#FF79C6">=</span><span style="color:#F1FA8C"> `tooltip-copy-</span><span style="color:#FF79C6">${</span><span style="color:#F8F8F2">id</span><span style="color:#FF79C6">}</span><span style="color:#F1FA8C">`</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">  tooltip.</span><span style="color:#50FA7B">setAttribute</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">aria-hidden</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">, </span><span style="color:#BD93F9">true</span><span style="color:#F8F8F2">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">  // Setting initial attributes and styles for tooltip</span></span>
<span class="line"><span style="color:#F8F8F2">  tooltip.style.visibility </span><span style="color:#FF79C6">=</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">hidden</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">  tooltip.style.position </span><span style="color:#FF79C6">=</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">fixed</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">  tooltip.textContent </span><span style="color:#FF79C6">=</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">Copy to clipboard</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">  svgContainer.innerHTML </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> copySvg;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">  // Setting aria-labelledby so the label is available to</span></span>
<span class="line"><span style="color:#6272A4">  // screen readers even when the tooltip is hidden</span></span>
<span class="line"><span style="color:#F8F8F2">  copyButton.</span><span style="color:#50FA7B">setAttribute</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">aria-labelledby</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">, tooltip.id);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">  // Adding click handler to button</span></span>
<span class="line"><span style="color:#F8F8F2">  copyButton.</span><span style="color:#50FA7B">addEventListener</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">click</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">, </span><span style="color:#FF79C6">async</span><span style="color:#F8F8F2"> () </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">    try</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#FF79C6">      await</span><span style="color:#F8F8F2"> navigator.clipboard.</span><span style="color:#50FA7B">writeText</span><span style="color:#F8F8F2">(textContent).</span><span style="color:#50FA7B">then</span><span style="color:#F8F8F2">(() </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#6272A4">        // Handling copied successfully</span></span>
<span class="line"><span style="color:#F8F8F2">        svgContainer.innerHTML </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> copiedSvg;</span></span>
<span class="line"><span style="color:#F8F8F2">        tooltip.textContent </span><span style="color:#FF79C6">=</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">Copied!</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#50FA7B">        setTimeout</span><span style="color:#F8F8F2">(() </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">          svgContainer.innerHTML </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> copySvg;</span></span>
<span class="line"><span style="color:#F8F8F2">          tooltip.textContent </span><span style="color:#FF79C6">=</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">Copy to clipboard</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">        }, </span><span style="color:#BD93F9">500</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">      });</span></span>
<span class="line"><span style="color:#F8F8F2">    } </span><span style="color:#FF79C6">catch</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#6272A4">      // Handling failure</span></span>
<span class="line"><span style="color:#F8F8F2">      svgContainer.innerHTML </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> failedSvg;</span></span>
<span class="line"><span style="color:#F8F8F2">      tooltip.textContent </span><span style="color:#FF79C6">=</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">Failed to copy</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#50FA7B">      setTimeout</span><span style="color:#F8F8F2">(() </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">        svgContainer.innerHTML </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> copySvg;</span></span>
<span class="line"><span style="color:#F8F8F2">        tooltip.textContent </span><span style="color:#FF79C6">=</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">Copy to clipboard</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">      }, </span><span style="color:#BD93F9">500</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">  // Function to handle position of tooltip</span></span>
<span class="line"><span style="color:#FF79C6">  function</span><span style="color:#50FA7B"> repositionTooltip</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#FF79C6">    const</span><span style="color:#F8F8F2"> tooltipRect </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> tooltip.</span><span style="color:#50FA7B">getBoundingClientRect</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#FF79C6">    const</span><span style="color:#F8F8F2"> buttonRect </span><span style="color:#FF79C6">=</span><span style="color:#F8F8F2"> copyButton.</span><span style="color:#50FA7B">getBoundingClientRect</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#F8F8F2">    tooltip.style.left </span><span style="color:#FF79C6">=</span><span style="color:#F1FA8C"> `</span><span style="color:#FF79C6">${</span><span style="color:#F8F8F2">buttonRect.left</span><span style="color:#FF79C6"> -</span><span style="color:#F8F8F2"> tooltipRect.width</span><span style="color:#FF79C6"> -</span><span style="color:#BD93F9"> 8</span><span style="color:#FF79C6">}</span><span style="color:#F1FA8C">px`</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">    tooltip.style.top </span><span style="color:#FF79C6">=</span><span style="color:#F1FA8C"> `</span><span style="color:#FF79C6">${</span><span style="color:#F8F8F2">buttonRect.top</span><span style="color:#FF79C6"> +</span><span style="color:#F8F8F2"> buttonRect.height</span><span style="color:#FF79C6"> /</span><span style="color:#BD93F9"> 2</span><span style="color:#FF79C6">}</span><span style="color:#F1FA8C">px`</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">    tooltip.style.transform </span><span style="color:#FF79C6">=</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">translateY(-50%)</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">  // Setting the position before the tooltip is shown</span></span>
<span class="line"><span style="color:#6272A4">  // to prevent jumps in layout.</span></span>
<span class="line"><span style="color:#50FA7B">  repositionTooltip</span><span style="color:#F8F8F2">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF79C6">  let</span><span style="color:#F8F8F2"> interval </span><span style="color:#FF79C6">=</span><span style="color:#BD93F9"> null</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#FF79C6">  function</span><span style="color:#50FA7B"> showTooltip</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#F8F8F2">    tooltip.style.visibility </span><span style="color:#FF79C6">=</span><span style="color:#E9F284"> '</span><span style="color:#F1FA8C">visible</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#FF79C6">    if</span><span style="color:#F8F8F2"> (interval) </span><span style="color:#50FA7B">clearInterval</span><span style="color:#F8F8F2">(interval);</span></span>
<span class="line"><span style="color:#50FA7B">    repositionTooltip</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#F8F8F2">    interval </span><span style="color:#FF79C6">=</span><span style="color:#50FA7B"> setInterval</span><span style="color:#F8F8F2">(repositionTooltip, </span><span style="color:#BD93F9">10</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">  copyButton.</span><span style="color:#50FA7B">addEventListener</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">mouseenter</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">, showTooltip);</span></span>
<span class="line"><span style="color:#F8F8F2">  copyButton.</span><span style="color:#50FA7B">addEventListener</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">focusin</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">, () </span><span style="color:#FF79C6">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#6272A4">    // Only showing the tooltip when the user focuses the button</span></span>
<span class="line"><span style="color:#6272A4">    // with the keyboard. This is possible since I'm using</span></span>
<span class="line"><span style="color:#6272A4">    // the `focus-visible` polyfill.</span></span>
<span class="line"><span style="color:#FF79C6">    if</span><span style="color:#F8F8F2"> (</span><span style="color:#FF79C6">!</span><span style="color:#F8F8F2">copyButton.classList.</span><span style="color:#50FA7B">contains</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">focus-visible</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">)) </span><span style="color:#FF79C6">return</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#50FA7B">    showTooltip</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#F8F8F2">  });</span></span>
<span class="line"><span style="color:#F8F8F2">  copyButton.</span><span style="color:#50FA7B">addEventListener</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">focusout</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">, hideTooltip);</span></span>
<span class="line"><span style="color:#F8F8F2">  copyButton.</span><span style="color:#50FA7B">addEventListener</span><span style="color:#F8F8F2">(</span><span style="color:#E9F284">'</span><span style="color:#F1FA8C">mouseleave</span><span style="color:#E9F284">'</span><span style="color:#F8F8F2">, hideTooltip);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6272A4">  // Finally increasing the id counter</span></span>
<span class="line"><span style="color:#F8F8F2">  id </span><span style="color:#FF79C6">+=</span><span style="color:#BD93F9"> 1</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>There’s some extra code in the script to handle internationalisation and some touch screen interaction, but this is the gist of it.</p>
<h2 id="internationalisation">Internationalisation</h2>
<p>I mentioned previously that my site is in both Spanish and English. I figured this might be a point of interest . As of now, there’s no official way to handle internationalisation of an Astro project. I’m not going to expand much on my way of handling this since right now it’s sort of a mess. Basically I’m doing the following to add internationalisation for my site:</p>
<ul>
<li>Articles are on separate markdown files. English files are in <code>src/posts/en</code> and Spanish files are in <code>src/posts/es</code>. As you might have seen previously, the route used with <code>Astro.fetchContent</code> pointed to either of this depending on if the page was in English or Spanish.</li>
<li>UI widgets from the article list, article and tags page are only using ternary operators to display different content depending on the page’s language.</li>
<li>The home page uses a JSON file which has <code>en</code> and <code>es</code> properties, since most of the content does not come from markdown files, this was way cleaner than having the translated content in two separate files (<code>index.astro</code> and <code>es/index.astro</code>).</li>
<li>In scripts (such as <code>copy-button.js</code>) I get the language of the page using <code>const lang = document.documentElement.lang;</code>.</li>
</ul>
<h2 id="conclusion">Conclusion</h2>
<p>Out of the three versions of my personal website, using Astro has been the most enjoyable experience. Keeping the developer experience of component driven development and being able to reuse some of the components from my previous site have been some of the main benefits. Besides the site is now lighter than my previous version since it only contains sprinkles of JavaScript where necessary. I’m really excited to see where Astro goes next. A big plus is that it’s also one of the most welcoming communities I’ve been in. I encourage you to consider it for your next static site!</p></section></article><footer data-astro-cid-gjtny2mx><style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var r=(i,c,s)=>{let n=async()=>{await(await i())()},t=new IntersectionObserver(e=>{for(let o of e)if(o.isIntersecting){t.disconnect(),n();break}});for(let e of s.children)t.observe(e)};(self.Astro||(self.Astro={})).visible=r;window.dispatchEvent(new Event("astro:visible"));})();;(()=>{var b=Object.defineProperty;var f=(c,o,i)=>o in c?b(c,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):c[o]=i;var l=(c,o,i)=>(f(c,typeof o!="symbol"?o+"":o,i),i);var p;{let c={0:t=>m(t),1:t=>i(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(i(t)),5:t=>new Set(i(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},o=t=>{let[e,r]=t;return e in c?c[e](r):void 0},i=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([e,r])=>[e,o(r)]));customElements.get("astro-island")||customElements.define("astro-island",(p=class extends HTMLElement{constructor(){super(...arguments);l(this,"Component");l(this,"hydrator");l(this,"hydrate",async()=>{var d;if(!this.hydrator||!this.isConnected)return;let e=(d=this.parentElement)==null?void 0:d.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let r=this.querySelectorAll("astro-slot"),a={},h=this.querySelectorAll("template[data-astro-template]");for(let n of h){let s=n.closest(this.tagName);s!=null&&s.isSameNode(this)&&(a[n.getAttribute("data-astro-template")||"default"]=n.innerHTML,n.remove())}for(let n of r){let s=n.closest(this.tagName);s!=null&&s.isSameNode(this)&&(a[n.getAttribute("name")||"default"]=n.innerHTML)}let u;try{u=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(n){let s=this.getAttribute("component-url")||"<unknown>",y=this.getAttribute("component-export");throw y&&(s+=` (export ${y})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),n),n}await this.hydrator(this)(this.Component,u,a,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});l(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),r.disconnect(),this.childrenConnectedCallback()},r=new MutationObserver(()=>{var a;((a=this.lastChild)==null?void 0:a.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});r.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}start(){let e=JSON.parse(this.getAttribute("opts")),r=this.getAttribute("client");if(Astro[r]===void 0){window.addEventListener(`astro:${r}`,()=>this.start(),{once:!0});return}Astro[r](async()=>{let a=this.getAttribute("renderer-url"),[h,{default:u}]=await Promise.all([import(this.getAttribute("component-url")),a?import(a):()=>()=>{}]),d=this.getAttribute("component-export")||"default";if(!d.includes("."))this.Component=h[d];else{this.Component=h;for(let n of d.split("."))this.Component=this.Component[n]}return this.hydrator=u,this.hydrate},e,this)}attributeChangedCallback(){this.hydrate()}},l(p,"observedAttributes",["props"]),p))}})();</script><astro-island uid="Z2mIJcG" component-url="/_astro/ShareButtons.38334b55.js" component-export="default" renderer-url="/_astro/client.ef651e53.js" props="{&quot;host&quot;:[7,&quot;https://pablo.berganza.dev/&quot;],&quot;blog&quot;:[0,{&quot;Content&quot;:[0,null],&quot;compiledContent&quot;:[0,null],&quot;default&quot;:[0,null],&quot;file&quot;:[0,&quot;/home/runner/work/pablo.berganza.dev-astro/pablo.berganza.dev-astro/src/posts/en/how-i-built-my-website-using-astro.md&quot;],&quot;frontmatter&quot;:[0,{&quot;title&quot;:[0,&quot;How I built my website using Astro&quot;],&quot;description&quot;:[0,&quot;Sort of a tutorial on how I built the current iteration of my website&quot;],&quot;published&quot;:[0,false],&quot;created&quot;:[0,&quot;2022-03-04&quot;],&quot;imgext&quot;:[0,&quot;png&quot;],&quot;image&quot;:[0,{&quot;width&quot;:[0,800],&quot;height&quot;:[0,420]}],&quot;tags&quot;:[1,[[0,&quot;javascript&quot;],[0,&quot;astro&quot;],[0,&quot;tutorial&quot;],[0,&quot;webdev&quot;]]]}],&quot;getHeadings&quot;:[0,null],&quot;rawContent&quot;:[0,null],&quot;url&quot;:[0],&quot;lang&quot;:[0,&quot;en&quot;],&quot;slug&quot;:[0,&quot;__draft__how-i-built-my-website-using-astro&quot;],&quot;source&quot;:[0,&quot;---\ntitle: \&quot;How I built my website using Astro\&quot;\ndescription: Sort of a tutorial on how I built the current iteration of my website\npublished: false\ncreated: &#39;2022-03-04&#39;\nimgext: png\nimage:\n  width: 800\n  height: 420\ntags:\n  - javascript\n  - astro\n  - tutorial\n  - webdev\n---\n\nMy [personal website](https://pablo.berganza.dev) has undergone a few rewrites and redesigns. First written using [Clojure](https://clojure.org), then rewritten using [Svelte](https://svelte.dev) and now using [Astro](https://astro.build).\n\n## What is Astro\nAstro is a static site builder that outputs only plain HTML and CSS by default and, if necessary, sprinkles of JavaScript. Astro embraces component driven development by allowing you to split your app in [components](https://docs.astro.build/en/core-concepts/astro-components/). Astro’s components (`.astro` extension) output plain HTML, but they do let you use JavaScript at build time to generate your final site. The most special characteristic about Astro is that it lets you use components from other frameworks to build your site as well. You can use components from React, Svelte, Solid, Vue, etc. from within an Astro component and they will output plain HTML by default as well!\n\n## Why Astro\nA website like a personal site or a blog does not really need a full front-end framework to work. Since the purpose of a site like this is mostly to display information, it feels like a waste of resources to make it an SPA. But the developer experience from frameworks might be desirable. With Astro you can [keep the developer experience from your favourite framework while still only sending HTML to your user](https://docs.astro.build/en/core-concepts/component-hydration/)! In the case of my personal site I only needed JavaScript for a few specific features: a “copy to clipboard” button on my articles’ code snippets, a comment section on each article, and a little widget that shows the logos of technologies I have experience in. This is why Astro felt like a perfect choice for it!\n\nBesides this, Astro gave me some other niceties:\n\n* Support to write the content of my site/articles in markdown.\n* Support to create an RSS feed of my articles.\n* Easy to transition to since, for the most part, I could reuse some of the components I used on my previous Svelte site.\n\n## Scope of this article\nI will focus mostly on some details related to features of my website. Styling and layouts will not be mentioned at all since that would depend highly on yourself and your requisites. And only some basic information regarding how to use Astro itself will be included. Check [Astro’s documentation](https://docs.astro.build/en/getting-started/) to get familiar with it. In order to understand this article, you should at least be familiar with [Astro’s component syntax](https://docs.astro.build/en/core-concepts/astro-components/). You may see this article more as an overview on how my site works rather than a full in-depth tutorial.\n\n## Structure of the project\nThere&#39;s not that many pages on my site, so the structure is quite small:\n\n```\nsrc/pages\n├── 404.astro\n├── blog\n│   ├── [slug].astro\n│   ├── index.astro\n│   └── tags\n│       └── [tag].astro\n├── es\n│   ├── blog\n│   │   ├── [slug].astro\n│   │   ├── index.astro\n│   │   └── tags\n│   │       └── [tag].astro\n│   └── index.astro\n└── index.astro\n```\n\nThere’s basically four kinds of pages pages: The home page: `index.astro`, a page with a list of all my articles: `blog/index.astro`, a page for a specific article: `blog/[slug].astro` and a page for articles filtered by a tag: `blog/tags/[tag].astro`.\n\nThis whole structure is duplicated inside of the `es` directory since my site is also in Spanish.\n\nI keep my articles as markdown files on `src/posts`:\n\n```\nsrc/posts\n├── en\n│   ├── announcing-felte-v1.md\n│   ├── creating-a-chai-like-assertion-library-using-proxies.md\n│   ├── felte-an-extensible-form-library-react.md\n│   ├── felte-an-extensible-form-library-solid.md\n│   ├── felte-an-extensible-form-library-svelte.md\n│   ├── graphql-is-it-worth-the-switch.md\n│   ├── how-i-built-my-website-using-astro.md\n│   ├── start-of-a-new-digital-journey.md\n│   ├── svelte-my-new-obsession.md\n│   └── you-dont-need-apollo.md\n└── es\n    ├── announcing-felte-v1.md\n    ├── creating-a-chai-like-assertion-library-using-proxies.md\n    ├── felte-an-extensible-form-library-react.md\n    ├── felte-an-extensible-form-library-solid.md\n    ├── felte-an-extensible-form-library-svelte.md\n    ├── graphql-is-it-worth-the-switch.md\n    ├── start-of-a-new-digital-journey.md\n    ├── svelte-my-new-obsession.md\n    └── you-dont-need-apollo.md\n```\n\nTwo layout components in `src/layouts`:\n\n```\nsrc/layouts\n├── Base.astro\n├── PostLayout.astro\n└── copy-button.js\n```\n\n&gt; `copy-button.js` is the script I use to add a `Copy to clipboard` button on code snippets.\n\nI also keep some reusable components on the `src/components` folder.\n\n## Article list page\nSince my site is in both English and Spanish, most of the contents of the files within the `pages` are reusable components. This means that the markup for files within `src/pages` is really small. The file that generates the list of articles (`src/pages/blog/index.astro`) contains the following markup:\n\n```html\n&lt;Base title=\&quot;Blog\&quot; lang=\&quot;en\&quot; section=\&quot;blog\&quot;&gt;\n  &lt;Blogs lang=\&quot;en\&quot; posts={posts} showRss /&gt;\n&lt;/Base&gt;\n```\n\nIt’s just two components. A `Base` layout component that contains the `&lt;html&gt;` tag, SEO related tags, styling, etc. And a `Blogs` component that renders the lists of articles.  Each of them receiving certain props:\n\nThe `Base` component receives the following:\n* `title` is used to create the pages `&lt;title&gt;`. Within the `Base` component this will get turned into `Blog | Pablo Berganza`.\n* `lang` is used to communicate what language the page is currently on. Since this is called within the English part of my site, it’s hardcoded as `en`. This is used to create the `&lt;html lang&gt;` attribute, the link to the Spanish version, and to change communicate which language to use for certain attributes such as the page’s description.\n* `section` is used to communicate on which section of the page we are. Used to build links among other things.\n\nThe `Blogs` component receives the following:\n* `lang` serves the same purpose as for `Base`.\n* `posts` is an array containing the articles to show in the page.\n* `showRss` is a boolean to tell if the current page should show a link to my RSS feed. Since I share this component also for the `tags` page, and I don’t want to show said link in that page since I felt it’d give the false impression that you can subscribe to a specific tag.\n\nThe `posts` array is obtained by using `Astro.fetchContent` to get the markdown files for my articles. Within the `blog/index.astro` file, this looks more or less like this (in the file’s front matter):\n\n```javascript\n// Inside of the component&#39;s front matter\nconst posts = Astro\n      // We fetch the markdown files for\n      // my articles in English\n      .fetchContent(&#39;../../posts/en/*.md&#39;)\n      // If we are in production mode, we filter\n      // posts that are not yet published\n      .filter((post) =&gt; {\n        if (import.meta.env.PROD) {\n          return post.published;\n        }\n        return true;\n      })\n      // We add the URL for each article based on the\n      // file&#39;s path.\n      .map((post) =&gt; {\n        let slug = post\n          .file\n          .pathname\n          .replace(/\\/src\\/posts\\/en\\//, &#39;&#39;)\n          .replace(/\\.md$/, &#39;&#39;);\n        // For local development, we modify the URL for\n        // drafts.\n        if (!post.published) slug = `__draft__${slug}`;\n        const url = `/blog/${slug}`\n        return {\n          ...post,\n          url,\n        };\n      })\n      // We sort the articles based on publication date\n      .sort((a, b) =&gt; {\n        return (\n          new Date(b.created).getTime() -\n            new Date(a.created).getTime()\n        )\n      });\n```\n\nWe are chaining a few methods here. First we use `fetchContent` to get all the markdown articles that are in English (in my project I keep them on `src/posts/en`). [Astro.fetchContent](https://docs.astro.build/en/reference/api-reference/#astrofetchcontent) is a utility provided by Astro that, currently, only serves to import markdown files.\n\nNext we use `filter` to filter articles that have not yet been published in production mode. I only filter these articles in this page since I still want the blog to be available via direct URL as a draft.\n\nNext we use `map` to add a `url` property to each post derived from the file’s path. This is used to add the link to each article’s page on each item. Note that I modify the URL when the article is a draft. This is only useful for local dev since the article won’t appear on the article list when deployed.\n\nFinally we sort the articles based on the property `created`, which contains the publication date I set on the file’s front matter.\n\n## Article page\nThe pages for each article are created from the file `pages/blog/[slug].astro`. The `[slug]` section indicates that this file will handle a [dynamic route](https://docs.astro.build/en/core-concepts/routing/#dynamic-routes), which may refer to multiple pages. The markup for this component is as follows:\n\n```html\n&lt;Post post={post} /&gt;\n```\n\n`Post` is similar to our `Base` component previously mentioned. It also sets an `&lt;html&gt;` tag, sets meta tags, styling, etc. The layout was different enough to warrant a different layout in this case.\n\nUnlike the `Base` component, this one only receives a `post` prop which contains the post’s parsed content from `Astro.fetchContent`. The language of the page and its content are included in that same prop.\n\nThe value for `post` comes from `getStaticPaths`, which is a function exported from the component itself that is used by Astro to handle dynamic routes. For my site this looks more or less like this:\n\n```javascript\n// Inside of the component&#39;s front matter\nexport async function getStaticPaths() {\n  const posts = Astro\n        .fetchContent(&#39;../../posts/en/*.md&#39;)\n        .map((post) =&gt; {\n          // We generate slugs for each article based\n          // on the file&#39;s path\n          let slug = post\n            .file\n            .pathname\n            .replace(&#39;/src/posts/en/&#39;, &#39;&#39;)\n            .replace(&#39;.md&#39;, &#39;&#39;);\n          // We modify the article&#39;s slug for drafts\n          if (!post.published) slug = `__draft__${slug}`;\n          return {\n            ...post,\n            lang: &#39;en&#39;,\n            slug,\n          };\n        });\n\n  // We get an array of all the possible slugs\n  const slugs = posts.map((post) =&gt; post.slug);\n\n  // This is the return value expected from `getStaticPaths`\n  // It&#39;s an object representing each page that&#39;s going\n  // to be generated.\n  return slugs.map(slug =&gt; {\n    return {\n      params: { slug },\n      props: {\n        // Each page will receive a single article as a prop.\n        post: posts.find(post =&gt; post.slug === slug)\n      },\n    }\n  });\n}\n\n// We get the `post` prop from `Astro.props`\n// This is the value that will be passed to the `Post`\n// component.\nconst { post } = Astro.props;\n```\n\nThe front matter will export a `getStaticPaths` function. Inside of this function I’m fetching the markdown file’s from my articles. I’m then adding a `slug` property to each file which is derived from the file’s path. This slug will refer to the path parameter in `[slug].astro`. Note that I’m not filtering the articles on this page since I want to be able to share them as drafts.\n\n&gt; Out of the scope of this article: If the file is a draft I add a `&lt;meta name=“robots” content=“noindex”&gt;` tag to the page’s head so it does not get indexed by search engines. The slug is modified to prepend `__draft__` to prevent search engines from caching the `noindex` when the article is actually published.\n\nAstro expects that the `getStaticPaths` function returns an array of objects. Each object represents each page that should be generated. In my case each object contains the following properties:\n\n* `params` is an object that contains the path parameters for each page. For example: if we had a slug `example-article` in this file `src/pages/blog/[slug].astro`, and we assign that to the `slug` property of `params`, this would tell Astro to generate a file for this page in `/blog/example-article/index.html`.\n* `props` is an object that contains the props each component will receive from `Astro.props`. In this case it only contains a single prop `post` which will have a single article with a matching slug from the path parameter.\n\n## Adding an RSS feed\nAstro has a really handy utility to [create RSS feeds from your dynamic routes](https://docs.astro.build/en/guides/rss/). This is only available on dynamic routes currently, which is why I used a `[slug].astro` file to create my articles instead of using [markdown pages](https://docs.astro.build/en/guides/markdown-content/#markdown-pages). In order to add an RSS feed to the site, we’d need to modify the `getStaticPaths` function exported from `[slug].astro`. This looks like this in my site:\n\n```javascript\n// Inside of the component&#39;s front matter\n// `getStaticPaths` receives an object with a function `rss`\nexport async function getStaticPaths({ rss }) {\n  const posts = Astro\n        .fetchContent(&#39;../../posts/en/*.md&#39;)\n        .map((post) =&gt; {\n          const slug = post\n                .file\n                .pathname\n                .replace(&#39;/src/posts/en/&#39;, &#39;&#39;)\n                .replace(&#39;.md&#39;, &#39;&#39;);\n          return {\n            ...post,\n            lang: &#39;en&#39;,\n            slug,\n          };\n        });\n\n  const slugs = posts.map((post) =&gt; post.slug);\n\n  // We call the `rss` function with the information of our\n  // feed.\n  rss({\n    title: &#39;Blog | Pablo Berganza&#39;,\n    stylesheet: true,\n    description: &#39;Articles about web dev among other things&#39;,\n    customData: &#39;&lt;language&gt;en-us&lt;/language&gt;&#39;,\n    // We filter, sort by published date and map the\n    // articles to be in the shape Astro expects.\n    items: posts\n      .filter((post) =&gt; {\n        if (import.meta.env.PROD) {\n          return post.published;\n        }\n        return true;\n      })\n      .sort((a, b) =&gt; {\n        return (\n          new Date(b.created).getTime() -\n            new Date(a.created).getTime()\n        )\n      })\n      .map(item =&gt; ({\n        title: item.title,\n        description: item.description,\n        link: item\n          .file\n          .pathname\n          .replace(&#39;/src/posts/en&#39;, &#39;/blog&#39;)\n          .replace(&#39;.md&#39;, &#39;&#39;),\n        pubDate: item.created,\n      })),\n    dest: &#39;/blog/rss.xml&#39;,\n  });\n\n  return slugs.map(slug =&gt; {\n    return {\n      params: { slug },\n      props: {\n        post: posts.find(post =&gt; post.slug === slug)\n      },\n    }\n  });\n}\n\nconst { post } = Astro.props;\n```\n\nThe only difference from this and the previous version of `getStaticPaths` is that we’re accepting an object as a parameter that contains an `rss` function, and then we’re calling it with some options. The rest is the same.\n\n## Table of contents component\nThe table of contents, a recent addition to my site, is made without any JavaScript.  I’m using a `&lt;details&gt;` element so the table of contents is hidden unless the user wants to see it. The markup for it looks like this:\n\n```jsx\n&lt;details&gt;\n  &lt;summary&gt;\n    &lt;!-- An SVG icon obtained from heroicons --&gt;\n    &lt;ChevronRight /&gt;\n    {lang === &#39;en&#39; ? &#39;Table of contents&#39; : &#39;Índice&#39;}\n  &lt;/summary&gt;\n  &lt;ol id=\&quot;toc\&quot;&gt;\n    {headers.map((header) =&gt; {\n      return (\n        &lt;li&gt;\n          &lt;a href={`#${header.slug}`}&gt;{header.text}&lt;/a&gt;\n          {header.subheaders.length !== 0 &amp;&amp; (\n            &lt;ul&gt;\n              {header.subheaders.map((sh) =&gt; (\n                &lt;li&gt;\n                  &lt;a href={`#${sh.slug}`}&gt;{sh.text}&lt;/a&gt;\n                &lt;/li&gt;\n              ))}\n            &lt;/ul&gt;\n          )}\n        &lt;/li&gt;\n      );\n    })}\n  &lt;/ol&gt;\n&lt;/details&gt;\n```\n\nThe `headers` come from Astro’s `fetchContent` result. I manually nested sub levels (only `&lt;h2&gt;` and `&lt;h3&gt;` elements get added to the table of contents).\n\n```javascript\n// Inside of the component&#39;s front matter\nconst { headers: astroHeaders, lang = &#39;en&#39; } = Astro.props;\nlet headers = [];\nfor (const header of astroHeaders) {\n  if (header.depth === 2) {\n    headers.push({\n      ...header,\n      subheaders: [],\n    });\n    continue;\n  }\n  if (header.depth === 3) {\n    const lastHeader = headers[headers.length - 1];\n    lastHeader.subheaders.push(header);\n  }\n}\n```\n\n## Copy to clipboard button on code snippets\nAs mentioned earlier, I’m adding a `copy to clipboard` button using JavaScript to my code snippets. This is a vanilla JS script that looks for each `&lt;pre&gt;` block, puts it in a container and adds a `&lt;button&gt;` to it with a handler that copies the `&lt;pre&gt;` element’s text content to the clipboard. While there are some third party packages/plugins to accomplish this, I could not make them work as I wanted. You may have better luck than me, though!\n\n This script gets added using a `&lt;script&gt;` tag in the component right after the article’s content. This prevent’s the layout from jumping (since the script modifies the layout itself). A simplified version of it is as follows:\n\n```javascript\nconst codeBlocks = document.querySelectorAll(&#39;pre&#39;);\n// SVG markup omitted for brevity.\nconst copySvg = `...`;\nconst copiedSvg = `...`;\nconst failedSvg = `...`;\n// Adding some styles for the button\nconst style = document.createElement(&#39;style&#39;);\nstyle.type = &#39;text/css&#39;;\nstyle.textContent = `...`;\ndocument.head.appendChiled(style);\nlet id = 0;\nfor (const block of codeBlocks) {\n  const textContent = block.textContent;\n  const parent = block.parentNode;\n  const container = document.createElement(&#39;div&#39;);\n  // Moving the code block to the container div\n  parent.insertBefore(container, block);\n  // Making the code block focusable so it can be scrolled\n  // by keyboard users\n  block.tabIndex = 0;\n\n  // Creating the button and its children\n  const copyButton = document.createElement(&#39;button&#39;);\n  container.appendChild(copyButton);\n  const svgContainer = document.createElement(&#39;div&#39;);\n  copyButton.appendChild(svgContainer);\n  const tooltip = document.createElement(&#39;div&#39;);\n  copyButton.appendChild(tooltip);\n\n  tooltip.id = `tooltip-copy-${id}`;\n  tooltip.setAttribute(&#39;aria-hidden&#39;, true);\n\n  // Setting initial attributes and styles for tooltip\n  tooltip.style.visibility = &#39;hidden&#39;;\n  tooltip.style.position = &#39;fixed&#39;;\n  tooltip.textContent = &#39;Copy to clipboard&#39;;\n  svgContainer.innerHTML = copySvg;\n\n  // Setting aria-labelledby so the label is available to\n  // screen readers even when the tooltip is hidden\n  copyButton.setAttribute(&#39;aria-labelledby&#39;, tooltip.id);\n\n  // Adding click handler to button\n  copyButton.addEventListener(&#39;click&#39;, async () =&gt; {\n    try {\n      await navigator.clipboard.writeText(textContent).then(() =&gt; {\n        // Handling copied successfully\n        svgContainer.innerHTML = copiedSvg;\n        tooltip.textContent = &#39;Copied!&#39;;\n        setTimeout(() =&gt; {\n          svgContainer.innerHTML = copySvg;\n          tooltip.textContent = &#39;Copy to clipboard&#39;;\n        }, 500);\n      });\n    } catch {\n      // Handling failure\n      svgContainer.innerHTML = failedSvg;\n      tooltip.textContent =&#39;Failed to copy&#39;;\n      setTimeout(() =&gt; {\n        svgContainer.innerHTML = copySvg;\n        tooltip.textContent = &#39;Copy to clipboard&#39;;\n      }, 500);\n    }\n  });\n\n  // Function to handle position of tooltip\n  function repositionTooltip() {\n    const tooltipRect = tooltip.getBoundingClientRect();\n    const buttonRect = copyButton.getBoundingClientRect();\n    tooltip.style.left = `${buttonRect.left - tooltipRect.width - 8}px`;\n    tooltip.style.top = `${buttonRect.top + buttonRect.height / 2}px`;\n    tooltip.style.transform = &#39;translateY(-50%)&#39;;\n  }\n\n  // Setting the position before the tooltip is shown\n  // to prevent jumps in layout.\n  repositionTooltip();\n\n  let interval = null;\n  function showTooltip() {\n    tooltip.style.visibility = &#39;visible&#39;;\n    if (interval) clearInterval(interval);\n    repositionTooltip();\n    interval = setInterval(repositionTooltip, 10);\n  }\n\n  copyButton.addEventListener(&#39;mouseenter&#39;, showTooltip);\n  copyButton.addEventListener(&#39;focusin&#39;, () =&gt; {\n    // Only showing the tooltip when the user focuses the button\n    // with the keyboard. This is possible since I&#39;m using\n    // the `focus-visible` polyfill.\n    if (!copyButton.classList.contains(&#39;focus-visible&#39;)) return;\n    showTooltip();\n  });\n  copyButton.addEventListener(&#39;focusout&#39;, hideTooltip);\n  copyButton.addEventListener(&#39;mouseleave&#39;, hideTooltip);\n\n  // Finally increasing the id counter\n  id += 1;\n}\n```\n\nThere’s some extra code in the script to handle internationalisation and some touch screen interaction, but this is the gist of it.\n\n## Internationalisation\nI mentioned previously that my site is in both Spanish and English. I figured this might be a point of interest . As of now, there’s no official way to handle internationalisation of an Astro project. I’m not going to expand much on my way of handling this since right now it’s sort of a mess. Basically I’m doing the following to add internationalisation for my site:\n\n* Articles are on separate markdown files. English files are in `src/posts/en` and Spanish files are in `src/posts/es`. As you might have seen previously, the route used with `Astro.fetchContent` pointed to either of this depending on if the page was in English or Spanish.\n* UI widgets from the article list, article and tags page are only using ternary operators to display different content depending on the page’s language.\n* The home page uses a JSON file which has `en` and `es` properties, since most of the content does not come from markdown files, this was way cleaner than having the translated content in two separate files (`index.astro` and `es/index.astro`).\n* In scripts (such as `copy-button.js`) I get the language of the page using `const lang = document.documentElement.lang;`.\n\n## Conclusion\nOut of the three versions of my personal website, using Astro has been the most enjoyable experience. Keeping the developer experience of component driven development and being able to reuse some of the components from my previous site have been some of the main benefits. Besides the site is now lighter than my previous version since it only contains sprinkles of JavaScript where necessary. I’m really excited to see where Astro goes next. A big plus is that it’s also one of the most welcoming communities I’ve been in. I encourage you to consider it for your next static site!\n&quot;]}],&quot;lang&quot;:[0,&quot;en&quot;],&quot;data-astro-cid-gjtny2mx&quot;:[0,true]}" ssr="" client="visible" opts="{&quot;name&quot;:&quot;ShareButtons&quot;,&quot;value&quot;:true}" await-children=""><ul class="share-buttons svelte-1311d53"><li class="svelte-1311d53">Share this:</li> <li class="svelte-1311d53"><a href="https://www.facebook.com/sharer/sharer.php?u=https://pablo.berganza.dev/__draft__how-i-built-my-website-using-astro&amp;quote=Sort of a tutorial on how I built the current iteration of my website" target="_blank" title="Share on Facebook" rel="noopener noreferrer"><svg aria-hidden="true" class="fa-svelte  svelte-1d15yci" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"></path></svg> <span class="sr-only svelte-ud2mor">Share on Facebook</span></a> <dialog class="svelte-ud2mor"><div class="content svelte-ud2mor"><h1 class="svelte-ud2mor">Share on Facebook</h1> <form><label class="svelte-ud2mor"><span data-svelte-h="svelte-lep94b">Instance:</span> <input required type="text" placeholder="mastodon.social" value=""></label> <div class="button-group svelte-ud2mor"><button type="button" class="svelte-ud2mor" data-svelte-h="svelte-1g90lrk">Cancel</button> <button type="submit" class="svelte-ud2mor" data-svelte-h="svelte-hm278u">Share</button></div></form></div> </dialog></li> <li class="svelte-1311d53"><a href="https://twitter.com/intent/tweet?source=https://pablo.berganza.dev/__draft__how-i-built-my-website-using-astro&amp;text=Sort of a tutorial on how I built the current iteration of my website:%20https://pablo.berganza.dev/__draft__how-i-built-my-website-using-astro&amp;via=Pablo_ABC" target="_blank" title="Tweet" rel="noopener noreferrer"><svg aria-hidden="true" class="fa-svelte  svelte-1d15yci" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM351.3 199.3v0c0 86.7-66 186.6-186.6 186.6c-37.2 0-71.7-10.8-100.7-29.4c5.3 .6 10.4 .8 15.8 .8c30.7 0 58.9-10.4 81.4-28c-28.8-.6-53-19.5-61.3-45.5c10.1 1.5 19.2 1.5 29.6-1.2c-30-6.1-52.5-32.5-52.5-64.4v-.8c8.7 4.9 18.9 7.9 29.6 8.3c-9-6-16.4-14.1-21.5-23.6s-7.8-20.2-7.7-31c0-12.2 3.2-23.4 8.9-33.1c32.3 39.8 80.8 65.8 135.2 68.6c-9.3-44.5 24-80.6 64-80.6c18.9 0 35.9 7.9 47.9 20.7c14.8-2.8 29-8.3 41.6-15.8c-4.9 15.2-15.2 28-28.8 36.1c13.2-1.4 26-5.1 37.8-10.2c-8.9 13.1-20.1 24.7-32.9 34c.2 2.8 .2 5.7 .2 8.5z"></path></svg> <span class="sr-only svelte-ud2mor">Tweet</span></a> <dialog class="svelte-ud2mor"><div class="content svelte-ud2mor"><h1 class="svelte-ud2mor">Tweet</h1> <form><label class="svelte-ud2mor"><span data-svelte-h="svelte-lep94b">Instance:</span> <input required type="text" placeholder="mastodon.social" value=""></label> <div class="button-group svelte-ud2mor"><button type="button" class="svelte-ud2mor" data-svelte-h="svelte-1g90lrk">Cancel</button> <button type="submit" class="svelte-ud2mor" data-svelte-h="svelte-hm278u">Share</button></div></form></div> </dialog></li> <li class="svelte-1311d53"><a href="https://getpocket.com/save?url=https://pablo.berganza.dev/__draft__how-i-built-my-website-using-astro&amp;title=How I built my website using Astro" target="_blank" title="Add to Pocket" rel="noopener noreferrer"><svg aria-hidden="true" class="fa-svelte  svelte-1d15yci" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M407.6 64h-367C18.5 64 0 82.5 0 104.6v135.2C0 364.5 99.7 464 224.2 464c124 0 223.8-99.5 223.8-224.2V104.6c0-22.4-17.7-40.6-40.4-40.6zm-162 268.5c-12.4 11.8-31.4 11.1-42.4 0C89.5 223.6 88.3 227.4 88.3 209.3c0-16.9 13.8-30.7 30.7-30.7 17 0 16.1 3.8 105.2 89.3 90.6-86.9 88.6-89.3 105.5-89.3 16.9 0 30.7 13.8 30.7 30.7 0 17.8-2.9 15.7-114.8 123.2z"></path></svg> <span class="sr-only svelte-ud2mor">Add to Pocket</span></a> <dialog class="svelte-ud2mor"><div class="content svelte-ud2mor"><h1 class="svelte-ud2mor">Add to Pocket</h1> <form><label class="svelte-ud2mor"><span data-svelte-h="svelte-lep94b">Instance:</span> <input required type="text" placeholder="mastodon.social" value=""></label> <div class="button-group svelte-ud2mor"><button type="button" class="svelte-ud2mor" data-svelte-h="svelte-1g90lrk">Cancel</button> <button type="submit" class="svelte-ud2mor" data-svelte-h="svelte-hm278u">Share</button></div></form></div> </dialog></li> <li class="svelte-1311d53"><a href="http://www.reddit.com/submit?url=https://pablo.berganza.dev/__draft__how-i-built-my-website-using-astro&amp;title=How I built my website using Astro" target="_blank" title="Submit to Reddit" rel="noopener noreferrer"><svg aria-hidden="true" class="fa-svelte  svelte-1d15yci" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M283.2 345.5c2.7 2.7 2.7 6.8 0 9.2-24.5 24.5-93.8 24.6-118.4 0-2.7-2.4-2.7-6.5 0-9.2 2.4-2.4 6.5-2.4 8.9 0 18.7 19.2 81 19.6 100.5 0 2.4-2.3 6.6-2.3 9 0zm-91.3-53.8c0-14.9-11.9-26.8-26.5-26.8-14.9 0-26.8 11.9-26.8 26.8 0 14.6 11.9 26.5 26.8 26.5 14.6 0 26.5-11.9 26.5-26.5zm90.7-26.8c-14.6 0-26.5 11.9-26.5 26.8 0 14.6 11.9 26.5 26.5 26.5 14.9 0 26.8-11.9 26.8-26.5 0-14.9-11.9-26.8-26.8-26.8zM448 80v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V80c0-26.5 21.5-48 48-48h352c26.5 0 48 21.5 48 48zm-99.7 140.6c-10.1 0-19 4.2-25.6 10.7-24.1-16.7-56.5-27.4-92.5-28.6l18.7-84.2 59.5 13.4c0 14.6 11.9 26.5 26.5 26.5 14.9 0 26.8-12.2 26.8-26.8 0-14.6-11.9-26.8-26.8-26.8-10.4 0-19.3 6.2-23.8 14.9l-65.7-14.6c-3.3-.9-6.5 1.5-7.4 4.8l-20.5 92.8c-35.7 1.5-67.8 12.2-91.9 28.9-6.5-6.8-15.8-11-25.9-11-37.5 0-49.8 50.4-15.5 67.5-1.2 5.4-1.8 11-1.8 16.7 0 56.5 63.7 102.3 141.9 102.3 78.5 0 142.2-45.8 142.2-102.3 0-5.7-.6-11.6-2.1-17 33.6-17.2 21.2-67.2-16.1-67.2z"></path></svg> <span class="sr-only svelte-ud2mor">Submit to Reddit</span></a> <dialog class="svelte-ud2mor"><div class="content svelte-ud2mor"><h1 class="svelte-ud2mor">Submit to Reddit</h1> <form><label class="svelte-ud2mor"><span data-svelte-h="svelte-lep94b">Instance:</span> <input required type="text" placeholder="mastodon.social" value=""></label> <div class="button-group svelte-ud2mor"><button type="button" class="svelte-ud2mor" data-svelte-h="svelte-1g90lrk">Cancel</button> <button type="submit" class="svelte-ud2mor" data-svelte-h="svelte-hm278u">Share</button></div></form></div> </dialog></li> <li class="svelte-1311d53"><a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https://pablo.berganza.dev/__draft__how-i-built-my-website-using-astro&amp;title=How I built my website using Astro&amp;summary=Sort of a tutorial on how I built the current iteration of my website&amp;source=https://pablo.berganza.dev/__draft__how-i-built-my-website-using-astro" target="_blank" title="Share on LinkedIn" rel="noopener noreferrer"><svg aria-hidden="true" class="fa-svelte  svelte-1d15yci" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg> <span class="sr-only svelte-ud2mor">Share on LinkedIn</span></a> <dialog class="svelte-ud2mor"><div class="content svelte-ud2mor"><h1 class="svelte-ud2mor">Share on LinkedIn</h1> <form><label class="svelte-ud2mor"><span data-svelte-h="svelte-lep94b">Instance:</span> <input required type="text" placeholder="mastodon.social" value=""></label> <div class="button-group svelte-ud2mor"><button type="button" class="svelte-ud2mor" data-svelte-h="svelte-1g90lrk">Cancel</button> <button type="submit" class="svelte-ud2mor" data-svelte-h="svelte-hm278u">Share</button></div></form></div> </dialog></li> <li class="svelte-1311d53"><a href="https://{host}/share?text=Sort of a tutorial on how I built the current iteration of my website%0A%0Ahttps://pablo.berganza.dev/__draft__how-i-built-my-website-using-astro by @pablo@sivar.social" target="_blank" title="Share on Mastodon" rel="noopener noreferrer"><svg aria-hidden="true" class="fa-svelte  svelte-1d15yci" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"></path></svg> <span class="sr-only svelte-ud2mor">Share on Mastodon</span></a> <dialog class="svelte-ud2mor"><div class="content svelte-ud2mor"><h1 class="svelte-ud2mor">Share on Mastodon</h1> <form><label class="svelte-ud2mor"><span data-svelte-h="svelte-lep94b">Instance:</span> <input required type="text" placeholder="mastodon.social" value=""></label> <div class="button-group svelte-ud2mor"><button type="button" class="svelte-ud2mor" data-svelte-h="svelte-1g90lrk">Cancel</button> <button type="submit" class="svelte-ud2mor" data-svelte-h="svelte-hm278u">Share</button></div></form></div> </dialog></li> </ul><!--astro:end--></astro-island><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();</script><astro-island uid="1QRaJY" component-url="/_astro/Commento.943f3c16.js" component-export="default" renderer-url="/_astro/client.ef651e53.js" props="{&quot;lang&quot;:[0,&quot;en&quot;],&quot;src&quot;:[0,&quot;https://cdn.commento.io/js/commento.js&quot;],&quot;data-astro-cid-gjtny2mx&quot;:[0,true]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;Commento&quot;,&quot;value&quot;:true}"></astro-island></footer></main></body></html>