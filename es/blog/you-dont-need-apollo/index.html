<!DOCTYPE html>
<html lang="es" class="astro-GJTNY2MX">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>En realidad no necesitas Apollo | Pablo Berganza</title>
    <link rel="alternate" hreflang="en" href="https://pablo.berganza.dev/blog/you-dont-need-apollo">
    <link href="/apple-icon-57x57.png" rel="apple-touch-icon" sizes="57x57">
    <link href="/apple-icon-60x60.png" rel="apple-touch-icon" sizes="60x60">
    <link href="/apple-icon-72x72.png" rel="apple-touch-icon" sizes="72x72">
    <link href="/apple-icon-76x76.png" rel="apple-touch-icon" sizes="76x76">
    <link href="/apple-icon-114x114.png" rel="apple-touch-icon" sizes="114x114">
    <link href="/apple-icon-120x120.png" rel="apple-touch-icon" sizes="120x120">
    <link href="/apple-icon-144x144.png" rel="apple-touch-icon" sizes="144x144">
    <link href="/apple-icon-152x152.png" rel="apple-touch-icon" sizes="152x152">
    <link href="/apple-icon-180x180.png" rel="apple-touch-icon" sizes="180x180">
    <link href="/android-icon-192x192.png" rel="icon" sizes="192x192" type="image/png">
    <link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png">
    <link href="/favicon-96x96.png" rel="icon" sizes="96x96" type="image/png">
    <link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png">
    <link rel="icon" type="image/png" href="/favicon.ico">
    <link href="/manifest.json" rel="manifest">
    <meta content="#E34495" name="msapplication-TileColor">
    <meta content="ms-icon-144x144.png" name="msapplication-TileImage">
    <meta content="#E34495" name="theme-color">
    <script type="module" src="https://unpkg.com/yt-vid@0.0.5/dist/yt-vid/yt-vid.esm.js"></script>
    
    <script src="/scripts/focus-visible.js" defer></script>
    
    <script type="application/ld+json">
     {
      "@context": "https://schema.org/",
      "@type": "BlogPosting",
      "headline": "En realidad no necesitas Apollo",
      "alternativeHeadline": "¿Proyecto hobby? ¿Aprendiendo GraphQL? Tal vez te estás complicando con Apollo",
      "image": "https://pablo.berganza.dev/assets/blog-pics/2020-06-08.jpg",
      "dateCreated": "2020-06-08",
      "datePublished": "2020-06-08",
      "isFamilyFriendly": "true",
      "publisher": {
        "@type": "Person",
        "name": "Pablo Berganza",
        "url": "https://pablo.berganza.dev/",
        "email": "pablo@berganza.dev",
        "jobTitle": "Software Engineer"
      },
      "author": {
        "@type": "Person",
        "name": "Pablo Berganza",
        "url": "https://pablo.berganza.dev/",
        "email": "pablo@berganza.dev",
        "jobTitle": "Software Engineer"
      }
     }
    </script>

    <meta name="author" content="Pablo Berganza">
<meta name="description" content="¿Proyecto hobby? ¿Aprendiendo GraphQL? Tal vez te estás complicando con Apollo">
<meta name="title" content="En realidad no necesitas Apollo">
<meta itemprop="name" content="En realidad no necesitas Apollo">
<meta itemprop="description" content="¿Proyecto hobby? ¿Aprendiendo GraphQL? Tal vez te estás complicando con Apollo">
<meta name="twitter:image" content="https://pablo.berganza.dev/assets/blog-pics/2020-06-08.jpg"><meta property="og:image" content="https://pablo.berganza.dev/assets/blog-pics/2020-06-08.jpg"><meta itemprop="image" content="https://pablo.berganza.dev/assets/blog-pics/2020-06-08.jpg"><meta name="twitter:card" content="summary_large_image">

<meta name="twitter:title" content="En realidad no necesitas Apollo">
<meta name="twitter:description" content="¿Proyecto hobby? ¿Aprendiendo GraphQL? Tal vez te estás complicando con Apollo">
<meta name="twitter:site" content="Pablo_ABC">
<meta name="twitter:creator" content="Pablo_ABC">
<meta property="og:title" content="En realidad no necesitas Apollo">
<meta property="og:url" content="https://pablo.berganza.dev/es/blog/you-dont-need-apollo">
<meta property="og:site_name" content="Pablo Berganza">
<meta property="og:description" content="¿Proyecto hobby? ¿Aprendiendo GraphQL? Tal vez te estás complicando con Apollo">
<meta property="og:locale" content="es">
<meta property="fb:admins" content="1441268341">
<meta property="fb:app_id" content="2097322913669232">
<meta property="og:type" content="article">
<meta property="article:author" content="Pablo Berganza"><meta property="article:published_time" content="2020-06-08"><meta name="twitter:data1" value="6 min"><meta name="twitter:data2" value="Pablo Berganza">

<meta name="twitter:label1" value="Tiempo de lectura"><meta name="twitter:label2" value="Autor">
    <meta name="color-scheme" content="light dark">
  <link rel="stylesheet" href="/_astro/index.f6505e2a.css" />
<link rel="stylesheet" href="/_astro/_slug_.18a4f530.css" />
<link rel="stylesheet" href="/_astro/index.8aa7437c.css" />
<link rel="stylesheet" href="/_astro/404.515a2f4b.css" />
<link rel="stylesheet" href="/_astro/Commento.942ba5ae.css" /><script type="module" src="/_astro/hoisted.f7167de3.js"></script></head>
  <body class="astro-GJTNY2MX">
    <main class="astro-GJTNY2MX">
      <a class="home-page-link astro-IVBVD6UX" aria-label="Home page" href="/es">PB</a>
      <a class="lang-link astro-C5LAM3SP" href="/blog/you-dont-need-apollo" lang="en">
  Speak English?
</a>
      <article class="astro-GJTNY2MX">
        <header class="astro-GJTNY2MX">
          <h1 class="title astro-GJTNY2MX">En realidad no necesitas Apollo</h1>
          <p class="astro-GJTNY2MX">¿Proyecto hobby? ¿Aprendiendo GraphQL? Tal vez te estás complicando con Apollo</p>
        </header>
        <img alt="" class="banner astro-GJTNY2MX" src="/assets/blog-pics/2020-06-08.jpg" width="800" height="600">
        <div class="stats astro-GJTNY2MX">
          <div class="ttr astro-GJTNY2MX">
            <span class="astro-GJTNY2MX">
              <svg role="img" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="astro-SKEV4GDG">
  <title>Tiempo de lectura:</title>
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" class="astro-SKEV4GDG"></path>
</svg>
            </span>
            <time datetime="6m" class="astro-GJTNY2MX">
              6
              minutos
            </time>
          </div>
          <div class="created astro-GJTNY2MX">
            <span class="astro-GJTNY2MX">
              <svg role="img" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="astro-NE6VAZLN">
  <title>Fecha de creación:</title>
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" class="astro-NE6VAZLN"></path>
</svg>
            </span>
            <time class="created-date astro-GJTNY2MX" datetime="2020-06-08">8 de junio de 2020
            </time>
          </div>
        </div>
        <div class="tags astro-GJTNY2MX">
          Etiquetas:
          <ul class="astro-GJTNY2MX">
            <li class="astro-GJTNY2MX">
                  <a href="/es/blog/tags/javascript" class="astro-GJTNY2MX">
                    javascript
                  </a>
                </li><li class="astro-GJTNY2MX">
                  <a href="/es/blog/tags/graphql" class="astro-GJTNY2MX">
                    graphql
                  </a>
                </li><li class="astro-GJTNY2MX">
                  <a href="/es/blog/tags/react" class="astro-GJTNY2MX">
                    react
                  </a>
                </li><li class="astro-GJTNY2MX">
                  <a href="/es/blog/tags/webdev" class="astro-GJTNY2MX">
                    webdev
                  </a>
                </li>
          </ul>
        </div>
        
        <section class="content astro-GJTNY2MX">
          <details class="astro-OBEWOZ47">
  <summary class="astro-OBEWOZ47">
    <svg aria-hidden="true" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
    <span class="astro-OBEWOZ47">Índice</span>
  </summary>
  <ol id="toc" class="astro-OBEWOZ47">
    <li class="astro-OBEWOZ47">
          <a href="#el-camino-hacia-graphql-en-el-front-end" class="astro-OBEWOZ47">El camino hacia GraphQL en el front-end</a>
          
        </li><li class="astro-OBEWOZ47">
          <a href="#cuál-es-la-alternativa" class="astro-OBEWOZ47">¿Cuál es la alternativa?</a>
          
        </li><li class="astro-OBEWOZ47">
          <a href="#mejor-ergonomía" class="astro-OBEWOZ47">Mejor ergonomía</a>
          
        </li><li class="astro-OBEWOZ47">
          <a href="#herramientas-existentes" class="astro-OBEWOZ47">Herramientas existentes</a>
          
        </li><li class="astro-OBEWOZ47">
          <a href="#conclusión" class="astro-OBEWOZ47">Conclusión</a>
          
        </li>
  </ol>
</details>
          <p>La primera vez que probé <a href="https://graphql.org">GraphQL</a> fue cuando todavía me hubiera considerado solamente un desarrollador back-end. Hace aproximadamente dos años me di la oportunidad de aprenderlo gracias al soporte de <a href="https://nestjs.com">NestJS</a> y me enamoré completamente de él. El hecho de que la documentación se genere automáticamente, y que puedes pedir exactamente la información que necesites con una sola petición, me hizo sentir que trabajar con un API GraphQL como un desarrollador front-end sería muy placentero.</p>
<h2 id="el-camino-hacia-graphql-en-el-front-end">El camino hacia GraphQL en el front-end</h2>
<p>Me había motivado para crear algo del lado del front-end con este nuevo conocimiento. Para ese entonces, todavía estaba acostumbrándome al desarrollo en front-end con <a href="https://reactjs.org">React</a> (la última vez que había hecho algo en front-end, jQuery seguía siendo la herramienta a utilizar). Naturalmente, busqué <code>graphql react</code> en DuckDuckGo y lo primero que encontré fue <a href="https://www.apollographql.com">Apollo</a>. Apollo es una herramienta increíble que ofrece muchas utilidades; incluso puedes manejar el estado de tu aplicación con ella. Pero, esta herramienta si se sentía algo <em>pesada</em> para alguien que solo está intentando aprender como usar GraphQL, o para cualquier proyecto pequeño en ese sentido. Admito que fui algo ingenuo, pero en ese momento si pensé: <em>wow, GraphQL solamente sería útil para proyectos muy grandes</em>. Aun así continué realizando mis experimentos con Apollo. Como era de esperar, pasé gran parte del tiempo leyendo como usar Apollo; algo que no es malo en sí, pero si se sentiría abrumador para alguien aprendiendo.</p>
<p>En algún momento el año pasado encontré <a href="https://formidable.com/open-source/urql/">urql</a>, que busca ser una alternativa más liviana a Apollo, y fue increíble. Un API más simple, y menos utilidades, significaba que requería menos tiempo leyendo la documentación y más tiempo construyendo lo que necesitaba. Pero siempre se sentía algo pesado para mis casos de uso. Aun así, en estos momentos escogería urql sobre Apollo para un proyecto serio, ya que si siento que Apollo intenta hacer demasiado para mi gusto.</p>
<p>Actualmente no he trabajado profesionalmente en ningún proyecto que utilice GraphQL, pero he seguido utilizándolo para mis proyectos personales. Sin embargo, durante ese tiempo no podía evitar seguir sintiendo que el punto de entrada era algo alto para cualquier desarrollador front-end que quisiera aprenderlo. Si buscas en DuckDuckGo (o Google) <code>react graphql</code>, tus primeros resultados serán Apollo y <a href="https://www.howtographql.com">howtographql.com</a>. Si ingresas a este último, verás que Apollo y urql son listados como la <em>opción para principiantes</em>. Siento que esto es un punto de entrada artificialmente alto para un principiante.</p>
<h2 id="cuál-es-la-alternativa">¿Cuál es la alternativa?</h2>
<p>¿Cuáles son los requisitos mínimos para hacer una petición a un API GraphQL desde el navegador? Pues… solamente el API <a href="https://developer.mozilla.org/es/docs/Web/API/Fetch_API">fetch</a>. Después de todo, solo necesitas hacer una petición HTTP POST al endpoint de GraphQL. Esta solo necesita contener una query/mutación en el <code>body</code> como una cadena de texto; opcionalmente las variables, si son necesarias para la query. No <em>necesita</em> ser una petición POST, y puede tener un tipo MIME <code>application/graphql</code>, pero una petición POST con un tipo MIME <code>application/json</code> debería funcionar siempre para mantenerlo sencillo.</p>
<pre is:raw="" class="astro-code dracula" style="background-color: #282A36; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #50FA7B">fetch</span><span style="color: #F8F8F2">(</span><span style="color: #F1FA8C">`</span><span style="color: #FF79C6">${</span><span style="color: #F8F8F2">API</span><span style="color: #FF79C6">}</span><span style="color: #F1FA8C">/graphql`</span><span style="color: #F8F8F2">, {</span></span>
<span class="line"><span style="color: #F8F8F2">  method</span><span style="color: #FF79C6">:</span><span style="color: #F8F8F2"> </span><span style="color: #E9F284">'</span><span style="color: #F1FA8C">post</span><span style="color: #E9F284">'</span><span style="color: #F8F8F2">,</span></span>
<span class="line"><span style="color: #F8F8F2">  headers</span><span style="color: #FF79C6">:</span><span style="color: #F8F8F2"> { </span><span style="color: #E9F284">'</span><span style="color: #F1FA8C">content-type</span><span style="color: #E9F284">'</span><span style="color: #FF79C6">:</span><span style="color: #F8F8F2"> </span><span style="color: #E9F284">'</span><span style="color: #F1FA8C">application/json</span><span style="color: #E9F284">'</span><span style="color: #F8F8F2"> },</span></span>
<span class="line"><span style="color: #F8F8F2">  body</span><span style="color: #FF79C6">:</span><span style="color: #F8F8F2"> </span><span style="color: #BD93F9">JSON</span><span style="color: #F8F8F2">.</span><span style="color: #50FA7B">stringify</span><span style="color: #F8F8F2">({</span></span>
<span class="line"><span style="color: #F8F8F2">    query</span><span style="color: #FF79C6">:</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">`...`</span><span style="color: #F8F8F2">,</span></span>
<span class="line"><span style="color: #F8F8F2">    variables</span><span style="color: #FF79C6">:</span><span style="color: #F8F8F2"> {</span></span>
<span class="line"><span style="color: #F8F8F2">      </span><span style="color: #FF79C6">...</span></span>
<span class="line"><span style="color: #F8F8F2">    },</span></span>
<span class="line"><span style="color: #F8F8F2">  })</span></span>
<span class="line"><span style="color: #F8F8F2">}).</span><span style="color: #50FA7B">then</span><span style="color: #F8F8F2">(</span><span style="color: #FFB86C; font-style: italic">r</span><span style="color: #F8F8F2"> </span><span style="color: #FF79C6">=></span><span style="color: #F8F8F2"> r.</span><span style="color: #50FA7B">json</span><span style="color: #F8F8F2">())</span></span></code></pre>
<p>Puedes transformar esto en una función más reutilizable así:</p>
<pre is:raw="" class="astro-code dracula" style="background-color: #282A36; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #FF79C6">async</span><span style="color: #F8F8F2"> </span><span style="color: #FF79C6">function</span><span style="color: #F8F8F2"> </span><span style="color: #50FA7B">gqlFetcher</span><span style="color: #F8F8F2">(</span><span style="color: #FFB86C; font-style: italic">query</span><span style="color: #F8F8F2">, </span><span style="color: #FFB86C; font-style: italic">variables</span><span style="color: #F8F8F2">) {</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #FF79C6">const</span><span style="color: #F8F8F2"> { data, errors } </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> </span><span style="color: #FF79C6">await</span><span style="color: #F8F8F2"> </span><span style="color: #50FA7B">fetch</span><span style="color: #F8F8F2">(</span><span style="color: #F1FA8C">`</span><span style="color: #FF79C6">${</span><span style="color: #F8F8F2">API</span><span style="color: #FF79C6">}</span><span style="color: #F1FA8C">/graphql`</span><span style="color: #F8F8F2">, {</span></span>
<span class="line"><span style="color: #F8F8F2">    method</span><span style="color: #FF79C6">:</span><span style="color: #F8F8F2"> </span><span style="color: #E9F284">'</span><span style="color: #F1FA8C">post</span><span style="color: #E9F284">'</span><span style="color: #F8F8F2">,</span></span>
<span class="line"><span style="color: #F8F8F2">    headers</span><span style="color: #FF79C6">:</span><span style="color: #F8F8F2"> { </span><span style="color: #E9F284">'</span><span style="color: #F1FA8C">content-type</span><span style="color: #E9F284">'</span><span style="color: #FF79C6">:</span><span style="color: #F8F8F2"> </span><span style="color: #E9F284">'</span><span style="color: #F1FA8C">application/json</span><span style="color: #E9F284">'</span><span style="color: #F8F8F2"> },</span></span>
<span class="line"><span style="color: #F8F8F2">    body</span><span style="color: #FF79C6">:</span><span style="color: #F8F8F2"> </span><span style="color: #BD93F9">JSON</span><span style="color: #F8F8F2">.</span><span style="color: #50FA7B">stringify</span><span style="color: #F8F8F2">({ query, variables }),</span></span>
<span class="line"><span style="color: #F8F8F2">  }).</span><span style="color: #50FA7B">then</span><span style="color: #F8F8F2">(</span><span style="color: #FFB86C; font-style: italic">r</span><span style="color: #F8F8F2"> </span><span style="color: #FF79C6">=></span><span style="color: #F8F8F2"> r.</span><span style="color: #50FA7B">json</span><span style="color: #F8F8F2">())</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #FF79C6">if</span><span style="color: #F8F8F2"> (errors) </span><span style="color: #FF79C6">throw</span><span style="color: #F8F8F2"> errors</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #FF79C6">return</span><span style="color: #F8F8F2"> data</span></span>
<span class="line"><span style="color: #F8F8F2">}</span></span></code></pre>
<p>Un servidor GraphQL responde con 200 aunque contenga errores. Generalmente solo debes revisar si la respuesta contiene una propiedad <code>errors</code>. Esta sigue siendo una manera optimista de manejar la petición, ya que no se está tomando en cuenta otros tipos de errores que sí pueden retornar 4xx o 5xx. Para el objetivo de esta publicación lo dejaremos así.</p>
<h2 id="mejor-ergonomía">Mejor ergonomía</h2>
<p>Este método hace que pierdas la cómoda interfaz que Apollo y urql proveen. Siempre puedes crear tus propios hooks que provean una interfaz más amigable, sin embargo, he preferido usar el hook <a href="https://github.com/vercel/swr">swr</a> de Vercel. Este hook funciona para cualquier petición de datos remotos. Su funcionamiento consiste en retornar primero la data del cache, luego hace la petición, y finalmente retorna la nueva información recibida. Provee una interfaz amigable para manejar la información dentro de tus componentes mientras mantienen tu UI, como ellos mismos lo describen, rápido y reactivo. La función <code>gqlFetcher</code> que hicimos antes ya es compatible con el hook <code>useSWR</code>, no se requiere trabajo adicional para hacerlo funcionar.</p>
<pre is:raw="" class="astro-code dracula" style="background-color: #282A36; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #FF79C6">import</span><span style="color: #F8F8F2"> useSWR </span><span style="color: #FF79C6">from</span><span style="color: #F8F8F2"> </span><span style="color: #E9F284">'</span><span style="color: #F1FA8C">swr</span><span style="color: #E9F284">'</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF79C6">const</span><span style="color: #F8F8F2"> gqlQuery </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">`...`</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF79C6">function</span><span style="color: #F8F8F2"> </span><span style="color: #50FA7B">Component</span><span style="color: #F8F8F2">() {</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #6272A4">// gqlFetcher es la misma función que se definió antes</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #FF79C6">const</span><span style="color: #F8F8F2"> { data, error } </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> </span><span style="color: #50FA7B">useSWR</span><span style="color: #F8F8F2">(gqlQuery, gqlFetcher)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #FF79C6">if</span><span style="color: #F8F8F2"> (error) </span><span style="color: #FF79C6">return</span><span style="color: #F8F8F2"> &#x3C;</span><span style="color: #FF79C6">div</span><span style="color: #F8F8F2">></span><span style="color: #FF79C6">{</span><span style="color: #6272A4">/*...*/</span><span style="color: #FF79C6">}</span><span style="color: #F8F8F2">&#x3C;/</span><span style="color: #FF79C6">div</span><span style="color: #F8F8F2">> </span><span style="color: #6272A4">// JSX con la info del error</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #FF79C6">if</span><span style="color: #F8F8F2"> (</span><span style="color: #FF79C6">!</span><span style="color: #F8F8F2">data) </span><span style="color: #FF79C6">return</span><span style="color: #F8F8F2"> &#x3C;</span><span style="color: #FF79C6">div</span><span style="color: #F8F8F2">>Loading...&#x3C;/</span><span style="color: #FF79C6">div</span><span style="color: #F8F8F2">> </span><span style="color: #6272A4">// Componente de "Loading"</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #FF79C6">return</span><span style="color: #F8F8F2"> &#x3C;</span><span style="color: #FF79C6">div</span><span style="color: #F8F8F2">></span><span style="color: #FF79C6">{</span><span style="color: #6272A4">/*...*/</span><span style="color: #FF79C6">}</span><span style="color: #F8F8F2">&#x3C;/</span><span style="color: #FF79C6">div</span><span style="color: #F8F8F2">> </span><span style="color: #6272A4">// JSX con la info recibida</span></span>
<span class="line"><span style="color: #F8F8F2">}</span></span></code></pre>
<p>Para pasar múltiples argumentos a la función <code>fetcher</code>, <code>useSWR</code> permite pasar un arreglo como primer argumento.</p>
<pre is:raw="" class="astro-code dracula" style="background-color: #282A36; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #FF79C6">const</span><span style="color: #F8F8F2"> gqlQuery </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> </span><span style="color: #F1FA8C">`...`</span></span>
<span class="line"><span style="color: #FF79C6">const</span><span style="color: #F8F8F2"> gqlVariables </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> {</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #6272A4">// ...</span></span>
<span class="line"><span style="color: #F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF79C6">function</span><span style="color: #F8F8F2"> </span><span style="color: #50FA7B">Component</span><span style="color: #F8F8F2">() {</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #FF79C6">const</span><span style="color: #F8F8F2"> { data, error } </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> </span><span style="color: #50FA7B">useSWR</span><span style="color: #F8F8F2">([gqlQuery, gqlVariables], gqlFetcher)</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #6272A4">// ...</span></span>
<span class="line"><span style="color: #F8F8F2">}</span></span></code></pre>
<blockquote>
<p><code>useSWR</code> utiliza el primer argumento como una <code>llave</code> que sirve para identificar la petición. Si es un arreglo, <code>swr</code> compara superficialmente cada elemento y, si alguno de ellos ha cambiado, revalida la petición.</p>
</blockquote>
<h2 id="herramientas-existentes">Herramientas existentes</h2>
<p>Si no quieres crear tu propio wrapper sobre <code>fetch</code>, puedes usar <a href="https://github.com/prisma-labs/graphql-request">graphql-request</a>. Es un wrapper sobre el API <code>fetch</code> para realizar peticiones a un servidor GraphQL que no requiere de mucho trabajo para empezar a utilizarlo. Ya tiene un buen manejo de errores y es isomórfica por defecto (algo que tal vez no le guste a algunas personas). La página de GitHub de <code>swr</code> ya muestra un ejemplo con esta herramienta.</p>
<pre is:raw="" class="astro-code dracula" style="background-color: #282A36; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color: #FF79C6">import</span><span style="color: #F8F8F2"> { request } </span><span style="color: #FF79C6">from</span><span style="color: #F8F8F2"> </span><span style="color: #E9F284">'</span><span style="color: #F1FA8C">graphql-request</span><span style="color: #E9F284">'</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF79C6">const</span><span style="color: #F8F8F2"> API </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> </span><span style="color: #E9F284">'</span><span style="color: #F1FA8C">https://api.graph.cool/simple/v1/movies</span><span style="color: #E9F284">'</span></span>
<span class="line"><span style="color: #FF79C6">const</span><span style="color: #F8F8F2"> </span><span style="color: #50FA7B">fetcher</span><span style="color: #F8F8F2"> </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> </span><span style="color: #FFB86C; font-style: italic">query</span><span style="color: #F8F8F2"> </span><span style="color: #FF79C6">=></span><span style="color: #F8F8F2"> </span><span style="color: #50FA7B">request</span><span style="color: #F8F8F2">(API, query)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FF79C6">function</span><span style="color: #F8F8F2"> </span><span style="color: #50FA7B">App</span><span style="color: #F8F8F2"> () {</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #FF79C6">const</span><span style="color: #F8F8F2"> { data, error } </span><span style="color: #FF79C6">=</span><span style="color: #F8F8F2"> </span><span style="color: #50FA7B">useSWR</span><span style="color: #F8F8F2">(</span></span>
<span class="line"><span style="color: #F8F8F2">    </span><span style="color: #F1FA8C">`{</span></span>
<span class="line"><span style="color: #F1FA8C">      Movie(title: "Inception") {</span></span>
<span class="line"><span style="color: #F1FA8C">        releaseDate</span></span>
<span class="line"><span style="color: #F1FA8C">        actors {</span></span>
<span class="line"><span style="color: #F1FA8C">          name</span></span>
<span class="line"><span style="color: #F1FA8C">        }</span></span>
<span class="line"><span style="color: #F1FA8C">      }</span></span>
<span class="line"><span style="color: #F1FA8C">    }`</span><span style="color: #F8F8F2">,</span></span>
<span class="line"><span style="color: #F8F8F2">    fetcher</span></span>
<span class="line"><span style="color: #F8F8F2">  )</span></span>
<span class="line"><span style="color: #F8F8F2">  </span><span style="color: #6272A4">// ...</span></span>
<span class="line"><span style="color: #F8F8F2">}</span></span></code></pre>
<h2 id="conclusión">Conclusión</h2>
<p>Siento que hay un punto de entrada artificialmente alto para desarrolladores front-end que quieren entrar al mundo de GraphQL. El hecho de que Apollo y urql sean mostrados como opciones para <em>principiantes</em> puede hacer sentir que estas herramientas son <em>necesarias</em> para trabajar con un API GraphQL. Esto no es cierto. <strong>Sí</strong> puedes construir una aplicación completa utilizando solamente <code>fetch</code>, tal vez agregando otras pequeñas librerías para utilidades extras. No puedo imaginar algún proyecto hobby que pueda necesitar todas las utilidades proveídas por estas grandes librerías. Clarificando: no estoy diciendo que no debas usar estas librerías si quieres, sino que no debes sentir que estás librerías son <em>necesarias</em> para construir lo que quieres.</p>
        </section>
      </article>
      
      <footer class="astro-GJTNY2MX">
        <ul class="share-buttons svelte-1311d53"><li class="svelte-1311d53">Compártelo:</li> <li class="svelte-1311d53"><a href="https://www.facebook.com/sharer/sharer.php?u=https://pablo.berganza.dev/es/you-dont-need-apollo&amp;quote=undefined" target="_blank" title="Share on Facebook" rel="noopener noreferrer"><svg aria-hidden="true" class="fa-svelte  svelte-1d15yci" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M400 32H48A48 48 0 0 0 0 80v352a48 48 0 0 0 48 48h137.25V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.27c-30.81 0-40.42 19.12-40.42 38.73V256h68.78l-11 71.69h-57.78V480H400a48 48 0 0 0 48-48V80a48 48 0 0 0-48-48z"></path></svg> <span class="sr-only svelte-12xlsax">Share on Facebook</span> </a></li> <li class="svelte-1311d53"><a href="https://twitter.com/intent/tweet?source=https://pablo.berganza.dev/es/you-dont-need-apollo&amp;text=undefined:%20https://pablo.berganza.dev/es/you-dont-need-apollo&amp;via=Pablo_ABC" target="_blank" title="Tweet" rel="noopener noreferrer"><svg aria-hidden="true" class="fa-svelte  svelte-1d15yci" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-48.9 158.8c.2 2.8.2 5.7.2 8.5 0 86.7-66 186.6-186.6 186.6-37.2 0-71.7-10.8-100.7-29.4 5.3.6 10.4.8 15.8.8 30.7 0 58.9-10.4 81.4-28-28.8-.6-53-19.5-61.3-45.5 10.1 1.5 19.2 1.5 29.6-1.2-30-6.1-52.5-32.5-52.5-64.4v-.8c8.7 4.9 18.9 7.9 29.6 8.3a65.447 65.447 0 0 1-29.2-54.6c0-12.2 3.2-23.4 8.9-33.1 32.3 39.8 80.8 65.8 135.2 68.6-9.3-44.5 24-80.6 64-80.6 18.9 0 35.9 7.9 47.9 20.7 14.8-2.8 29-8.3 41.6-15.8-4.9 15.2-15.2 28-28.8 36.1 13.2-1.4 26-5.1 37.8-10.2-8.9 13.1-20.1 24.7-32.9 34z"></path></svg> <span class="sr-only svelte-12xlsax">Tweet</span> </a></li> <li class="svelte-1311d53"><a href="https://getpocket.com/save?url=https://pablo.berganza.dev/es/you-dont-need-apollo&amp;title=undefined" target="_blank" title="Add to Pocket" rel="noopener noreferrer"><svg aria-hidden="true" class="fa-svelte  svelte-1d15yci" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M407.6 64h-367C18.5 64 0 82.5 0 104.6v135.2C0 364.5 99.7 464 224.2 464c124 0 223.8-99.5 223.8-224.2V104.6c0-22.4-17.7-40.6-40.4-40.6zm-162 268.5c-12.4 11.8-31.4 11.1-42.4 0C89.5 223.6 88.3 227.4 88.3 209.3c0-16.9 13.8-30.7 30.7-30.7 17 0 16.1 3.8 105.2 89.3 90.6-86.9 88.6-89.3 105.5-89.3 16.9 0 30.7 13.8 30.7 30.7 0 17.8-2.9 15.7-114.8 123.2z"></path></svg> <span class="sr-only svelte-12xlsax">Add to Pocket</span> </a></li> <li class="svelte-1311d53"><a href="http://www.reddit.com/submit?url=https://pablo.berganza.dev/es/you-dont-need-apollo&amp;title=undefined" target="_blank" title="Submit to Reddit" rel="noopener noreferrer"><svg aria-hidden="true" class="fa-svelte  svelte-1d15yci" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M283.2 345.5c2.7 2.7 2.7 6.8 0 9.2-24.5 24.5-93.8 24.6-118.4 0-2.7-2.4-2.7-6.5 0-9.2 2.4-2.4 6.5-2.4 8.9 0 18.7 19.2 81 19.6 100.5 0 2.4-2.3 6.6-2.3 9 0zm-91.3-53.8c0-14.9-11.9-26.8-26.5-26.8-14.9 0-26.8 11.9-26.8 26.8 0 14.6 11.9 26.5 26.8 26.5 14.6 0 26.5-11.9 26.5-26.5zm90.7-26.8c-14.6 0-26.5 11.9-26.5 26.8 0 14.6 11.9 26.5 26.5 26.5 14.9 0 26.8-11.9 26.8-26.5 0-14.9-11.9-26.8-26.8-26.8zM448 80v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V80c0-26.5 21.5-48 48-48h352c26.5 0 48 21.5 48 48zm-99.7 140.6c-10.1 0-19 4.2-25.6 10.7-24.1-16.7-56.5-27.4-92.5-28.6l18.7-84.2 59.5 13.4c0 14.6 11.9 26.5 26.5 26.5 14.9 0 26.8-12.2 26.8-26.8 0-14.6-11.9-26.8-26.8-26.8-10.4 0-19.3 6.2-23.8 14.9l-65.7-14.6c-3.3-.9-6.5 1.5-7.4 4.8l-20.5 92.8c-35.7 1.5-67.8 12.2-91.9 28.9-6.5-6.8-15.8-11-25.9-11-37.5 0-49.8 50.4-15.5 67.5-1.2 5.4-1.8 11-1.8 16.7 0 56.5 63.7 102.3 141.9 102.3 78.5 0 142.2-45.8 142.2-102.3 0-5.7-.6-11.6-2.1-17 33.6-17.2 21.2-67.2-16.1-67.2z"></path></svg> <span class="sr-only svelte-12xlsax">Submit to Reddit</span> </a></li> <li class="svelte-1311d53"><a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https://pablo.berganza.dev/es/you-dont-need-apollo&amp;title=undefined&amp;summary=undefined&amp;source=https://pablo.berganza.dev/es/you-dont-need-apollo" target="_blank" title="Share on LinkedIn" rel="noopener noreferrer"><svg aria-hidden="true" class="fa-svelte  svelte-1d15yci" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg> <span class="sr-only svelte-12xlsax">Share on LinkedIn</span> </a></li> </ul>
        <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();;(()=>{var d;{let h={0:t=>t,1:t=>JSON.parse(t,a),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(JSON.parse(t,a)),5:t=>new Set(JSON.parse(t,a)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(JSON.parse(t)),9:t=>new Uint16Array(JSON.parse(t)),10:t=>new Uint32Array(JSON.parse(t))},a=(t,e)=>{if(t===""||!Array.isArray(e))return e;let[r,n]=e;return r in h?h[r](n):void 0};customElements.get("astro-island")||customElements.define("astro-island",(d=class extends HTMLElement{constructor(){super(...arguments);this.hydrate=async()=>{var o;if(!this.hydrator||!this.isConnected)return;let e=(o=this.parentElement)==null?void 0:o.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let r=this.querySelectorAll("astro-slot"),n={},c=this.querySelectorAll("template[data-astro-template]");for(let s of c){let i=s.closest(this.tagName);i!=null&&i.isSameNode(this)&&(n[s.getAttribute("data-astro-template")||"default"]=s.innerHTML,s.remove())}for(let s of r){let i=s.closest(this.tagName);i!=null&&i.isSameNode(this)&&(n[s.getAttribute("name")||"default"]=s.innerHTML)}let l=this.hasAttribute("props")?JSON.parse(this.getAttribute("props"),a):{};await this.hydrator(this)(this.Component,l,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))}}connectedCallback(){!this.hasAttribute("await-children")||this.firstChild?this.childrenConnectedCallback():new MutationObserver((e,r)=>{r.disconnect(),setTimeout(()=>this.childrenConnectedCallback(),0)}).observe(this,{childList:!0})}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}start(){let e=JSON.parse(this.getAttribute("opts")),r=this.getAttribute("client");if(Astro[r]===void 0){window.addEventListener(`astro:${r}`,()=>this.start(),{once:!0});return}Astro[r](async()=>{let n=this.getAttribute("renderer-url"),[c,{default:l}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),o=this.getAttribute("component-export")||"default";if(!o.includes("."))this.Component=c[o];else{this.Component=c;for(let s of o.split("."))this.Component=this.Component[s]}return this.hydrator=l,this.hydrate},e,this)}attributeChangedCallback(){this.hydrate()}},d.observedAttributes=["props"],d))}})();</script><astro-island uid="Z27K7Sc" component-url="/_astro/Commento.4e9c2079.js" component-export="default" renderer-url="/_astro/client.c4e17359.js" props="{&quot;lang&quot;:[0,&quot;es&quot;],&quot;src&quot;:[0,&quot;https://cdn.commento.io/js/commento.js&quot;],&quot;class&quot;:[0,&quot;astro-GJTNY2MX&quot;]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;Commento&quot;,&quot;value&quot;:true}"></astro-island>
      </footer>
    </main>
    
  </body>
</html>