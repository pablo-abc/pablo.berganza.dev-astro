---
import Base from 'layouts:Base.astro';
import Blogs from 'components:Blog/Blogs.astro';

const posts = Astro
      .fetchContent('../../posts/en/*.md')
      .filter((post) => {
        if (import.meta.env.PROD) {
          return post.published;
        }
        return true;
      })
      .map((post) => {
        return {
          ...post,
          url: post
            .file
            .pathname
            .replace(/\/src\/posts\/en/, '/blog')
            .replace(/\.md$/, ''),
        };
      })
      .sort((a, b) => {
        return (
          new Date(b.created).getTime() -
            new Date(a.created).getTime()
        )
      });
---

<Base title="Blog" lang="en" section="blog">
  <Blogs lang="en" posts={posts} showRss />
</Base>
