---
import Base from 'layouts:Base.astro';
import Blogs from 'components:Blog/Blogs.astro';
const posts = Astro
      .fetchContent('../../../posts/es/*.md')
      .filter((post) => {
        if (import.meta.env.PROD) {
          return post.published;
        }
        return true;
      })
      .map((post) => {
        let slug = post
          .file
          .pathname
          .replace(/\/src\/posts\/es\//, '')
          .replace(/\.md$/, '');
        if (!post.published) slug = `__draft__${slug}`;
        const url = `/es/blog/${slug}`;
        return {
          ...post,
          url,
        }
      })
  .sort((a, b) => {
    return (
      new Date(b.created).getTime() -
      new Date(a.created).getTime()
    )
  });
---
<Base title="Blog" lang="es" section="blog">
  <Blogs lang="es" posts={posts} showRss />
</Base>
